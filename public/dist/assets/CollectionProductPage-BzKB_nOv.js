import{a as _,g as A,n as I,k as P,j as s,A as S,_ as F}from"./main-rkb-dHu5.js";import{C as L}from"./CartIcon-CjwAhOLY.js";import{B as d}from"./Button-CvMneL3o.js";import"./cn-DUyS5Z8L.js";const O=()=>{var u,p,h,f,j;const c=_(),{id:C,username:w}=A(),m=w.replace("@",""),{data:e,isLoading:k}=I({id:C}),n=e==null?void 0:e.data,{data:o}=P({username:m}),x=`cart_${(u=o==null?void 0:o.data)==null?void 0:u.influencerId}`;if(k)return s.jsx(S,{});const g=(t,l)=>{const a=Array.isArray(t)?t:[t],i=JSON.parse(localStorage.getItem(x)||"[]");a.forEach(y=>{var b,v;const N=(v=(b=e==null?void 0:e.data)==null?void 0:b.products)==null?void 0:v.find(r=>r._id===y);if(N){const r=i.find(B=>B._id===y);r?r.quantity+=1:i.push({...N,quantity:1,collectionUserId:l})}}),localStorage.setItem(x,JSON.stringify(i)),F.success("Added to cart successfully"),c(`/${m}/cart`)};return s.jsxs("div",{className:"flex flex-col px-6 md:px-24 gap-6",children:[s.jsxs("button",{className:"py-4 flex items-center gap-2",onClick:()=>c(-1),children:[s.jsx("img",{src:"/images/CaretDoubleLeft.png",alt:"Back",className:"w-4 h-4"}),s.jsx("span",{className:"text-lg font-medium",children:"Back"})]}),s.jsx("h1",{className:"text-3xl font-bold",children:n==null?void 0:n.title}),s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md sticky top-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Collection"}),s.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:(h=(p=e==null?void 0:e.data)==null?void 0:p.products)==null?void 0:h.map((t,l)=>s.jsxs("div",{className:"flex gap-3 p-4 border rounded-lg bg-gray-50 w-full",children:[s.jsx("img",{src:t.imageUrls||"placeholder-image-url",alt:t.title||"Product",className:"w-24 h-24 object-cover rounded-md"}),s.jsxs("div",{className:"flex flex-col flex-1 justify-between",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-sm font-semibold ",children:t.title.length>20?t.title.substring(0,20)+"...":t.title||"Product Title"}),s.jsx("p",{className:"text-xs text-gray-600",children:t.category||"Category"})]}),s.jsxs("div",{children:[s.jsxs("p",{className:"text-sm font-bold",children:[t.pricing,"€"]}),s.jsx(d,{variant:"secondary",onClick:()=>{var a;return g(t._id,(a=e==null?void 0:e.data)==null?void 0:a.userId)},className:"mt-2 py-1.5 text-sm w-full",children:"Buy only"})]})]})]},l))}),s.jsxs("div",{className:"mt-4 flex flex-col gap-3 pt-4 border-t",children:[s.jsxs("div",{className:"text-lg font-bold",children:["Total: ",(j=(f=e==null?void 0:e.data)==null?void 0:f.products)==null?void 0:j.reduce((t,l)=>t+(parseFloat(l.pricing)||0),0).toFixed(2),"€"]}),s.jsx(d,{variant:"primary",onClick:()=>{var t,l,a;return g((l=(t=e==null?void 0:e.data)==null?void 0:t.products)==null?void 0:l.map(i=>i._id),(a=e==null?void 0:e.data)==null?void 0:a.userId)},className:"w-full py-2",children:"Buy Collection"})]})]}),s.jsx("div",{className:"fixed z-50 shadow-xl right-6 bottom-6 rounded-full grid place-items-center",children:s.jsx(d,{variant:"primary",onClick:()=>c("/cart"),className:"p-3",children:s.jsx(L,{className:"w-6 h-6"})})})]})};export{O as default};
