import{w as xe,a_ as ge,r as a,a as be,ai as fe,j as e,b3 as $,av as l,b4 as je}from"./main-DA-vLYwL.js";import{R as ve}from"./index-BdrbOg9j.js";/* empty css                   */const Se=()=>{const{user:b}=xe(t=>t.auth),{data:f,isLoading:ye,refetch:Ne}=ge(),[i,u]=a.useState([]),[c,q]=a.useState("physical"),[j,v]=a.useState(""),[x,H]=a.useState(""),[y,K]=a.useState("fashion"),[d,O]=a.useState(""),[N,V]=a.useState(0),[w,Z]=a.useState(""),[z,P]=a.useState(""),[k,G]=a.useState(""),[p,_]=a.useState(!0),[S,M]=a.useState(void 0),[C,Q]=a.useState(void 0),[D,B]=a.useState(void 0),[F,J]=a.useState(void 0),[U,X]=a.useState(""),[o,Y]=a.useState([]),[h,T]=a.useState(null),[g,ee]=a.useState("box"),[A,se]=a.useState(""),[R,te]=a.useState(""),[L,ae]=a.useState([]),E=be(),[le,{isLoading:m}]=fe(),W=t=>{q(t)},re=()=>{_(t=>!t)},ne=t=>{const s=t.target.files[0];s&&s.type==="application/pdf"?(T(s),l.success("PDF uploaded successfully.")):l.error("Please upload a valid PDF file.")},ce=()=>{T(null),l.success("PDF removed.")},ie=t=>{t.preventDefault();const s=[...i,...t.dataTransfer.files];u(s)},oe=t=>{const s=[...i,...t.target.files];u(s)},de=async t=>{if(t.preventDefault(),b.stripeAccountId===void 0||b.stripeAccountId===null){l.error("Please connect your stripe account first");return}if(c==="physical"&&(f===void 0||f.length<1)){l.error("Please create a shipping zone first");return}const s=new FormData;if(!x){l.error("Description is required");return}if(!o.length){l.error("Image is required");return}if(d===""||d===null||d===void 0){l.error("Stock is required");return}if(c==="downloadable"&&i.length===0){l.error("Downloadable file is required");return}o.forEach(r=>{s.append("imageUrls",r)}),s.append("title",j),s.append("description",x),s.append("category",y),s.append("stock",d),s.append("pricing",w),s.append("commissionPercentage",N),s.append("wholesalePricing",z),s.append("discountedPrice",k),s.append("productType",c),s.append("isRecommended",p),s.append("tags",L),h&&s.append("specificationPdf",h),c==="downloadable"&&i.length>0&&s.append("downloadableDetails[fileUpload]",i[0]),c==="physical"&&(s.append("physicalDetails[weight]",S),s.append("physicalDetails[height]",C),s.append("physicalDetails[width]",F),s.append("physicalDetails[length]",D),s.append("physicalDetails[packageFormat]",g),s.append("physicalDetails[ean]",A),s.append("physicalDetails[sku]",R)),c==="virtual"&&s.append("virtualDetails[link]",U);try{for(var n of s.entries())console.log(n[0]+", "+n[1]);await le(s).unwrap(),l.success("Product created successfully"),E("/brands/products")}catch(r){l.error("Failed to create product"),console.error("Failed to create product: ",r)}},pe=t=>{t.length<=500?H(t):l.error("Description cannot exceed 500 characters")},he=t=>{const s=t.target.value;s.length<=60?v(s):v(s.slice(0,60))},me=t=>{const s=[...t.target.files];Y(n=>[...n,...s])},I=a.useRef(null);return e.jsx("form",{onSubmit:de,encType:"multipart/form-data",children:e.jsxs("div",{className:"p-6 min-h-screen",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{className:"mr-4",onClick:()=>E(-1),children:e.jsx("img",{src:"/icons/back_button.svg",alt:"back"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Add Product"})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-green-500 text-white-pure rounded-3xl px-4 py-2",disabled:m,children:m?"Saving...":"Save and Continue"})})]}),e.jsxs("div",{className:"flex justify-between items-start mb-6",children:[e.jsxs("div",{className:"w-2/3",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"General"}),e.jsxs("label",{className:"font-normal text-base py-2 block",children:["Name ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(max 60 characters)"})]}),e.jsx("input",{type:"text",placeholder:"Product Name",value:j,onChange:he,className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4"}),e.jsxs("h3",{className:"font-normal text-base py-2",children:["Description ",e.jsx("span",{className:"text-red-500",children:"*"}),e.jsx("span",{className:"text-sm text-gray-500 ml-2",children:"(max 500 characters)"})]}),e.jsx("div",{className:"items-start",children:e.jsx(ve,{theme:"snow",onChange:pe,placeholder:"Start typing...",value:x})})]}),e.jsx("div",{className:"w-1/3 flex pt-8 justify-end",children:e.jsxs("div",{className:"relative",children:[e.jsx("input",{type:"file",multiple:!0,accept:"image/*",onChange:me,className:"hidden",id:"imageUpload"}),e.jsxs("label",{htmlFor:"imageUpload",className:"cursor-pointer block relative group",children:[e.jsx("img",{src:o.length>0?URL.createObjectURL(o[0]):"/images/placeholderSocialIcon.png",alt:"Product Preview",className:"w-64 h-64 object-cover rounded-lg border-2 border-dashed border-gray-300 hover:border-green-500 transition-colors"}),e.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg opacity-0 group-hover:opacity-100 transition-opacity flex items-center justify-center",children:e.jsx("span",{className:"text-white text-sm",children:"Click to upload images"})}),o.length>0&&e.jsxs("div",{className:"absolute bottom-2 right-2 bg-black bg-opacity-75 text-white text-xs px-2 py-1 rounded",children:[o.length," image",o.length>1?"s":""," selected"]})]})]})})]}),e.jsxs("div",{className:"w-1/3 flex flex-col py-8 justify-end",children:[e.jsx("label",{htmlFor:"specificationPdf",className:"font-normal cursor-pointer text-base py-2 block",children:"Specification PDF"}),e.jsx("input",{type:"file",accept:"application/pdf",onChange:ne,id:"specificationPdf",className:"block w-full bg-white-pure border cursor-pointer border-green-100 rounded-3xl px-4 py-2"}),h&&e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"text-green-500 mt-2",children:["Uploaded: ",h.name]}),e.jsx("button",{children:e.jsx("button",{type:"button",onClick:ce,className:"text-red-500 underline",children:"Remove"})})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"font-normal text-base py-2 block",children:["Category ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("select",{value:y,onChange:t=>K(t.target.value),className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4 cursor-pointer",children:Object.keys($).map(t=>e.jsx("option",{value:$[t],children:t},t))})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"font-normal text-base py-2 block",children:"Tags (comma separated)"}),e.jsx("input",{type:"text",className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",value:L,onChange:t=>ae(t.target.value.split(","))})]}),e.jsxs("div",{children:[e.jsxs("label",{htmlFor:"stock",className:"font-normal text-base py-2 block",children:["Stock ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",id:"stock",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Product in stock",value:d,onChange:t=>{const s=t.target.value;/^\d*$/.test(s)&&O(s)}})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("label",{className:"flex items-start space-x-3 py-2",children:[e.jsx("input",{type:"checkbox",className:"accent-green-500 w-5 h-5",name:"productType",value:"downloadable",checked:c==="downloadable",onChange:()=>W("downloadable")}),e.jsxs("span",{className:"font-bold text-base",children:["Downloadable",e.jsx("p",{className:"text-sm text-gray-400 font-normal",children:"Such as eBooks, music, videos, software, or anything else digital. That are downloadable."})]})]}),e.jsxs("label",{className:"flex items-start space-x-3 py-2",children:[e.jsx("input",{type:"checkbox",className:"accent-green-500 w-5 h-5",name:"productType",value:"physical",checked:c==="physical",onChange:()=>W("physical")}),e.jsxs("span",{className:"font-bold text-base",children:["Physical",e.jsx("p",{className:"text-sm text-gray-400 font-normal",children:"Add t-shirts, books, art, merchandise or any other product that requires shipping."})]})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Pricing"}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base font-normal py-2",children:["Product Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"Product price",value:w,onChange:t=>{var r;const n=((r=t.target.value.match(/^\d*\.?\d{0,2}/))==null?void 0:r[0])||"";Z(n)}})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-base font-normal py-2",children:["Discounted Price ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"Discounted price",value:k,onChange:t=>{var r;const n=((r=t.target.value.match(/^\d*\.?\d{0,2}/))==null?void 0:r[0])||"";G(n)}})]})]}),e.jsxs("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:[c==="downloadable"&&e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wholesalePrice",className:"font-normal text-base py-2 block",children:"Wholesale Price"}),e.jsx("input",{type:"text",id:"wholesalePrice",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Wholesale Price",onChange:t=>{var r;const n=((r=t.target.value.match(/^\d*\.?\d{0,2}/))==null?void 0:r[0])||"";P(n)}})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"font-normal text-base py-2 block",children:"Commission Percentage"}),e.jsx("input",{type:"text",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"Commission percentage (0 - 100 %)",value:N,onChange:t=>{const s=t.target.value;(s===""||Number(s)<=100&&/^\d*\.?\d{0,2}$/.test(s))&&V(s)}})]})]}),e.jsxs("div",{className:"flex items-center space-x-2 mb-4",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"hidden",checked:p,onChange:re}),e.jsx("div",{className:`${p?"bg-green-500":"bg-gray-600"} w-10 h-6 rounded-full p-1 flex items-center transition-all duration-300`,children:e.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-300 ${p?"translate-x-4":""}`})})]}),e.jsx("span",{className:"text-gray-700 font-semibold",children:"Authorize Recommendations"})]})]}),c==="virtual"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Professional Pricing"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4 mb-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-normal py-2",children:"Professional Price"}),e.jsx("input",{type:"text",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"Professional price"})]})}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Add Product"}),e.jsx("div",{className:"grid md:grid-cols-2 gap-4",children:e.jsxs("div",{children:[e.jsx("label",{className:"block text-base font-normal py-2",children:"Product Link"}),e.jsx("input",{type:"text",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"URL of the product",value:U,onChange:t=>X(t.target.value)})]})})]}),c==="downloadable"&&e.jsx("div",{className:"mb-6",children:e.jsxs("div",{className:"mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"ATTACHMENT"}),e.jsxs("div",{onDrop:ie,onDragOver:t=>t.preventDefault(),className:"max-w-3xl border-2 border-dashed border-green-100 rounded-lg p-8 text-center cursor-pointer hover:border-green transition-colors duration-200",children:[e.jsx("input",{type:"file",multiple:!0,onChange:t=>oe(t),className:"hidden",ref:I,accept:"*/*"}),e.jsxs("div",{className:"flex flex-col items-center gap-2",children:[e.jsx("img",{src:"/icons/upload.svg",alt:"upload",className:"w-12 h-12"}),e.jsxs("p",{className:"text-grey-dark",children:["Drop your file here or"," ",e.jsx("span",{onClick:()=>I.current.click(),className:"text-green hover:text-green-dark underline cursor-pointer",children:"browse"})]}),e.jsx("p",{className:"text-sm text-grey",children:"Supports all file types"})]})]}),i.length>0&&e.jsx("div",{className:"mt-4",children:e.jsx("ul",{className:"space-y-2",children:i.map((t,s)=>e.jsxs("li",{className:"flex items-center justify-between bg-white-pure p-2 rounded-lg border border-green-100",children:[e.jsx("span",{className:"text-sm text-grey-dark truncate",children:t.name}),e.jsx("button",{onClick:()=>{const n=i.filter((r,ue)=>ue!==s);u(n)},className:"text-red-500 hover:text-red-700",children:e.jsx("img",{src:"/icons/trash.svg",alt:"remove",className:"w-4 h-4"})})]},s))})})]})}),c==="physical"&&e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"WHOLESALE PRICING"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"wholesalePrice",className:"font-normal text-base py-2 block",children:"Wholesale Price"}),e.jsx("input",{type:"text",id:"wholesalePrice",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Wholesale Price",onChange:t=>{var r;const n=((r=t.target.value.match(/^\d*\.?\d{0,2}/))==null?void 0:r[0])||"";P(n)}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"EAN",className:"font-normal text-base py-2 block",children:"EAN"}),e.jsx("input",{type:"text",id:"ean",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Enter EAN",value:A,onChange:t=>{const s=t.target.value;/^\d{0,13}$/.test(s)?se(s):l.error("EAN must be exactly 13 digits and contain only numbers.")}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"SKU",className:"font-normal text-base py-2 block",children:"SKU"}),e.jsx("input",{type:"text",id:"sku",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Enter SKU",value:R,onChange:t=>{const s=t.target.value;/^[a-zA-Z0-9]*$/.test(s)?te(s):l.error("SKU must be alphanumeric.")}})]})]}),e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Physical Product"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"weight",className:"font-normal text-base py-2 block",children:"Weight"}),e.jsx("input",{type:"text",id:"weight",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Product weight in kg",value:S,onChange:t=>{const s=t.target.value;/^\d*\.?\d{0,3}$/.test(s)||s===""?M(s):l.error("Weight must be a number with up to 2 decimal places.")}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"height",className:"font-normal text-base py-2 block",children:"Height"}),e.jsx("input",{type:"text",id:"height",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Product height in cm",value:C,onChange:t=>{const s=t.target.value;/^\d*\.?\d{0,2}$/.test(s)||s===""?Q(s):l.error("Height must be a number with up to 2 decimal places.")}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"length",className:"font-normal text-base py-2 block",children:"Length"}),e.jsx("input",{type:"text",id:"length",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Product length in cm",value:D,onChange:t=>{const s=t.target.value;/^\d*\.?\d{0,2}$/.test(s)||s===""?B(s):l.error("Length must be a number with up to 2 decimal places.")}})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"width",className:"font-normal text-base py-2 block",children:"Width"}),e.jsx("input",{type:"text",id:"width",className:"w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",placeholder:"Product width in cm",value:F,onChange:t=>{const s=t.target.value;/^\d*\.?\d{0,2}$/.test(s)||s===""?J(s):l.error("Width must be a number with up to 2 decimal places.")}})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"font-normal text-base py-2 block",children:"Package Format"}),e.jsx("select",{type:"text",placeholder:"What's the price of the course?",className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4 cursor-pointer",value:g,onChange:t=>ee(t.target.value),children:Object.keys(je).map(t=>e.jsx("option",{value:g[t],children:t},t))})]})]})]}),e.jsx("div",{children:e.jsx("button",{type:"submit",className:"bg-green-500 text-white-pure rounded-3xl px-4 py-2",disabled:m,children:m?"Saving...":"Save and Continue"})})]})})};export{Se as default};
