import{a as b,f as j,r,j as e,e as u}from"./main-17S3Hvul.js";import{u as v,I as p,c as N}from"./InputField-DhUJ8jJ9.js";import{B as P}from"./Button-D9xH6dL9.js";import"./createLucideIcon-DUHjy5LS.js";import"./eye-Bp5EXDuR.js";import"./cn-DUyS5Z8L.js";const M=()=>{const{register:l,handleSubmit:x,watch:f,formState:{errors:c}}=v({mode:"onChange"}),n=b(),[h]=j(),[d,a]=r.useState(null),[i,w]=r.useState(""),[m,g]=r.useState(""),t=h.get("token");r.useEffect(()=>{t?(async()=>{try{(await u.get(`/auth/validate-token?token=${t}`)).data.valid?a(!0):a(!1)}catch(s){console.error("Error validating token:",s),a(!1)}})():a(!1)},[t]),r.useEffect(()=>{d===!1&&n("/auth")},[d,n]);const y=async o=>{try{const s=await u.post("/auth/reset-password",{...o,token:t});g("Password reset successful. Redirecting..."),setTimeout(()=>{n("/")},2e3)}catch(s){console.error("Error resetting password:",s),w("Failed to reset password. Please try again.")}};return d===null?e.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"max-w-md w-full space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"mt-6 text-center text-3xl font-extrabold text-gray-900",children:"Reset Your Password"}),e.jsx("p",{className:"mt-2 text-center text-sm text-gray-600",children:"Enter your new password below"})]}),e.jsxs("form",{onSubmit:x(y),className:"mt-8 space-y-6 bg-white p-8 rounded-lg shadow-lg",children:[e.jsxs("div",{className:"rounded-md shadow-sm -space-y-px",children:[e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"newPassword",className:"sr-only",children:"New Password"}),e.jsx(p,{type:"password",name:"newPassword",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-t-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"New Password",register:l,validate:N,errors:c})]}),e.jsxs("div",{className:"mb-4",children:[e.jsx("label",{htmlFor:"confirmPassword",className:"sr-only",children:"Confirm Password"}),e.jsx(p,{type:"password",name:"confirmPassword",className:"appearance-none rounded-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-b-md focus:outline-none focus:ring-indigo-500 focus:border-indigo-500 focus:z-10 sm:text-sm",placeholder:"Confirm Password",register:l,validate:o=>o===f("newPassword")||"Passwords do not match",errors:c})]})]}),i&&e.jsx("p",{className:"text-red-500 text-sm",children:i}),m&&e.jsx("p",{className:"text-green-500 text-sm",children:m}),e.jsx("div",{children:e.jsx(P,{type:"submit",variant:"primary",className:"group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-[#000]",children:"Reset Password"})})]})]})})};export{M as default};
