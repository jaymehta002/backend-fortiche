import{r,bk as Q,j as e,A as B,_ as n,w as V,a_ as X,aB as H,bl as J,bm as K,aA as ee,aD as se}from"./main-rkb-dHu5.js";import{M as te}from"./Modal-BCQBNMZ8.js";import{I as C}from"./Input-CS6Pb1cZ.js";import{B as D}from"./Button-CvMneL3o.js";import{D as ae}from"./Dropdown-C3wOEOAw.js";import{g as re}from"./index-Bat3KLjb.js";import{X as ne}from"./x-6k1wTkVV.js";import"./cn-DUyS5Z8L.js";import{M as le}from"./Modal-_2ayBxly.js";import{C as ie}from"./CircularLoader-ByPKQ32Q.js";import"./es.promise.resolve-D15qDg2g.js";import"./createLucideIcon-Rsg1P1ng.js";import"./render-BxJVqWkM.js";const oe=({isOpen:c,onClose:m})=>{const[o,d]=r.useState([]),[x,P]=r.useState(""),[k,{isLoading:A}]=Q(),[g,N]=r.useState(""),[f,O]=r.useState(""),[i,w]=r.useState(""),[h,v]=r.useState(""),[p,S]=r.useState([]);r.useEffect(()=>{const t=re();S(t)},[]);const M=()=>{g&&!o.includes(g)&&(d([...o,g]),N(""))},b=t=>{d(o.filter(l=>l!==t))},u=async()=>{var t;if(!o.length){n.error("Please select at least one country");return}if(!x){n.error("Please enter shipping charges");return}if(!f){n.error("Please enter minimum order");return}if(!i){n.error("Please enter free shipping threshold");return}if(!h){n.error("Please enter delivery time");return}try{const l=await k({minimumOrder:f,freeShippingThreshold:i,deliveryTime:h,countries:o,shippingCharges:x});n.success("Shipping zone created successfully"),m()}catch(l){n.error(((t=l==null?void 0:l.data)==null?void 0:t.message)||"Failed to create shipping zone"),console.error(l)}m()},y=Object.entries(p).map(([t,l])=>({code:t,name:l.name})).filter(t=>!o.includes(t.name));return e.jsx(te,{isOpen:c,onClose:m,children:A?e.jsx(B,{}):e.jsxs("div",{className:"bg-green-light rounded-lg p-6 w-96 h-[40rem] overflow-y-auto",children:[e.jsx("div",{className:"flex justify-between items-center mb-4",children:e.jsx("h2",{className:"text-xl font-semibold",children:"Add Shipping Zone"})}),e.jsx("div",{className:"border-b border-gray-300 mb-4"}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"relative z-10",children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Country"}),e.jsxs("div",{className:"flex flex-grow items-center mt-1 z-10",children:[e.jsx(ae,{options:y.map(t=>t.name),name:g,onChange:t=>N(t),placeholder:"Select Country"}),e.jsx(D,{onClick:M,variant:"outline",className:"ml-2",children:"Add"})]}),e.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Add countries where you wish to deliver"}),e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:o.map((t,l)=>e.jsxs("div",{className:"bg-green text-white-pure px-3 py-2 rounded-md flex items-center",children:[t,e.jsx("button",{onClick:()=>b(t),className:"ml-1 text-white-pure hover:text-gray-300",children:e.jsx(ne,{size:14})})]},l))})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Shipping Charges"}),e.jsx(C,{placeholder:"Shipment Charges",value:x,onChange:t=>P(t.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Minimum Order"}),e.jsx(C,{placeholder:"Minimum Order",value:f,onChange:t=>O(t.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Free Shipping Threshold"}),e.jsx(C,{placeholder:"Free Shipping Threshold",value:i,onChange:t=>w(t.target.value),className:"mt-1"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Delivery Time"}),e.jsx(C,{placeholder:"Delivery Time",value:h,onChange:t=>v(t.target.value),className:"mt-1"})]})]}),e.jsxs("div",{className:"flex justify-start space-x-2 mt-6",children:[e.jsx(D,{variant:"secondary",className:"w-24 h-10 bg-white-pure text-green-dark",onClick:m,children:"Cancel"}),e.jsx(D,{variant:"primary",className:"w-24 h-10",onClick:u,children:"Save"})]})]})})},Ne=()=>{var L,F;const c=V(s=>s.auth.user),[m,o]=r.useState(!1);r.useState({"When a product purchased":!1,"When someone view my page":!1,"Payment Confirmation":!1,"Receive Special Offers from Brands":!1,"Receive Special Offers from Us":!1,"When new content published by follower":!1}),r.useState("");const{data:d,refetch:x,isLoading:P}=X(),[k,{isLoading:A}]=H(),[g]=J(),[N]=K(),[f,O]=r.useState("change"),[i,w]=r.useState([]);r.useState({includeSalesTax:!1,includeClientCountryTax:!1,chargeShippingSalesTax:!1,collectValueAddedTax:!1});const[h,v]=r.useState(""),[p,S]=r.useState(""),[M,b]=r.useState(!1),[u,y]=r.useState({currentPassword:"",newPassword:""}),[t,{isLoading:l}]=ee(),[_]=se(),[T,I]=r.useState({metaTitle:((L=c==null?void 0:c.seo)==null?void 0:L.metaTitle)||"",metaDescription:((F=c==null?void 0:c.seo)==null?void 0:F.metaDescription)||""});r.useEffect(()=>{w(d==null?void 0:d.shipping),m||(x(),w(d==null?void 0:d.shipping))},[m,d,x]);const U=async s=>{try{w(a=>a.map((j,E)=>E===s?{...j,isActive:!j.isActive}:j)),await N({id:i[s]._id,isActive:!i[s].isActive}),n.success("Shipping zone status updated")}catch{n.error("Error updating shipping zone status")}},$=async s=>{try{await g(s),x(),n.success("Shipping zone deleted")}catch{n.error("Error deleting shipping zone")}},R=async()=>{try{const a=(await k()).data.data.accountLink;window.open(a,"_blank")}catch{n.error("Error connecting account")}},W=()=>{o(!0)},q=()=>{const s={currentPassword:"",newPassword:""};return h||(s.currentPassword="Current password is required"),p?p.length<8?s.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(p)||(s.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):s.newPassword="New password is required",h===p&&(s.newPassword="New password must be different from current password"),y(s),!Object.values(s).some(a=>a!=="")},z=async()=>{q()&&b(!0)},Y=async()=>{var s;try{await t({oldPassword:h,newPassword:p}),n.success("Password updated successfully"),v(""),S(""),b(!1)}catch(a){n.error(((s=a==null?void 0:a.data)==null?void 0:s.message)||"Failed to update password")}},Z=s=>{const{name:a,value:j}=s.target;I(E=>({...E,[a]:j}))},G=async()=>{var s;try{await _(T),n.success("SEO settings updated successfully")}catch(a){n.error(((s=a==null?void 0:a.data)==null?void 0:s.message)||"Failed to update SEO settings")}};return P?e.jsx(B,{}):e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[m&&e.jsx(oe,{isOpen:m,onClose:()=>o(!1)}),c.stripeAccountId===null?e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 col-span-2 p-8 rounded-lg shadow-lg relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4",children:e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 text-sm rounded-full shadow-md",children:"Important"})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-6 text-yellow-700",children:"Payment Details"}),e.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Set your default currency for payment and link or un-link your payment account. This is a crucial first step to get started!"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("select",{className:"p-3 border-2 border-yellow-500 rounded-full bg-yellow-50 focus:outline-none focus:ring-2 focus:ring-yellow-400",children:e.jsx("option",{children:"Euro (â‚¬)"})}),e.jsx("button",{onClick:R,className:"bg-green-600 text-white font-bold px-5 py-3 rounded-full shadow hover:bg-green-700 transition-all duration-200",children:A?e.jsx(ie,{}):"Connect Stripe"})]})]}):e.jsxs("div",{className:"bg-green-100 border-l-4 border-green-500 col-span-2 p-8 rounded-lg shadow-lg relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4",children:e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 text-sm rounded-full shadow-md",children:"Connected"})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-6 text-green-700",children:"Payment Details"}),e.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Your Stripe account is connected. You can receive payments."})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow col-span-2",children:[e.jsxs("div",{className:"flex justify-between items-center mb-4",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Shipping Zones"}),e.jsx("button",{onClick:W,className:"bg-green-500 text-white-pure px-4 py-2 rounded-full",children:"+ Create Zone"})]}),i&&i.length>0?e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Establish which shipping methods are available for customers during the checkout process based on their shipping address."}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"min-w-full bg-green-light",children:[e.jsx("thead",{className:"border-b-2 border-gray-600",children:e.jsxs("tr",{children:[e.jsx("th",{className:"px-6 py-3 text-left text-sm leading-4 text-gray-600 tracking-wider",children:"Actions"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm leading-4 text-gray-600 tracking-wider",children:"Locations"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm leading-4 text-gray-600 tracking-wider",children:"Shipping Charges"}),e.jsx("th",{className:"px-6 py-3 text-left text-sm leading-4 text-gray-600 tracking-wider",children:"Estimated Delivery Time"})]})}),e.jsx("tbody",{children:i==null?void 0:i.map((s,a)=>e.jsxs("tr",{className:"hover:bg-gray-100 bg-white-pure",children:[e.jsx("td",{className:"px-6 py-4 border-b border-gray-200",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("label",{className:"flex items-center cursor-pointer",children:[e.jsx("input",{type:"checkbox",className:"sr-only",checked:s.isActive,onChange:()=>U(a)}),e.jsx("div",{className:`${s.isActive?"bg-green-500":"bg-gray-600"} w-10 h-6 rounded-full p-1 flex items-center transition-all duration-300`,children:e.jsx("div",{className:`bg-white w-4 h-4 rounded-full shadow-md transform transition-transform duration-300 ${s.isActive?"translate-x-4":""}`})})]}),e.jsx("button",{onClick:()=>$(s._id),className:"text-red-600 w-12 h-12",children:e.jsx("img",{src:"/icons/deleteIcon.svg",alt:"delete",className:"w-4 h-4"})})]})}),e.jsx("td",{className:"px-6 py-4 border-b border-gray-200",children:s.countries.join(", ")||"No countries added"}),e.jsx("td",{className:"px-6 py-4 border-b border-gray-200",children:s.minimumOrder}),e.jsx("td",{className:"px-6 py-4 border-b border-gray-200",children:s.deliveryTime})]},s._id))})]})})]}):e.jsx(e.Fragment,{children:e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"No shipping zones found."})})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Manage Password"}),f==="change"&&e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Enter your current password and your new password below."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"password",value:h,onChange:s=>{v(s.target.value),y(a=>({...a,currentPassword:""}))},placeholder:"Current Password",className:`w-full p-3 border rounded-full ${u.currentPassword?"border-red-500":""}`}),u.currentPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-3",children:u.currentPassword})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",value:p,onChange:s=>{S(s.target.value),y(a=>({...a,newPassword:""}))},placeholder:"New Password",className:`w-full p-3 border rounded-full ${u.newPassword?"border-red-500":""}`}),u.newPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-3",children:u.newPassword})]}),e.jsx("button",{onClick:z,disabled:l,className:"w-full bg-green-500 text-white px-4 py-3 rounded-full hover:bg-green-600 transition-colors duration-200 disabled:bg-green-300",children:l?"Updating...":"Update Password"})]})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"SEO"}),e.jsx("h3",{className:"font-bold text-2xl mb-2",children:"Custom Metadata"}),e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Changes to metadata may take some time to appear on other platforms."}),e.jsx("label",{className:"text-base mb-2",children:"Meta title"}),e.jsx("input",{type:"text",name:"metaTitle",value:T.metaTitle,onChange:Z,placeholder:"Meta title",className:"w-full p-2 border rounded mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Example: @peterdoe"}),e.jsx("label",{className:"text-base mb-2",children:"Meta description"}),e.jsx("input",{type:"text",name:"metaDescription",value:T.metaDescription,onChange:Z,placeholder:"Meta description",className:"w-full p-2 border rounded mb-2"}),e.jsx("p",{className:"text-xs text-gray-500",children:"Example: Best Ayurveda Practitioner"}),e.jsx("button",{onClick:G,className:"bg-green-500 text-white px-4 py-2 rounded-full hover:bg-green-600 transition-colors duration-200",children:"Save SEO Settings"})]}),e.jsx(le,{isOpen:M,onClose:()=>b(!1),title:"Confirm Password Change",children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"mb-4",children:"Are you sure you want to change your password?"}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>b(!1),className:"px-4 py-2 rounded-full border border-gray-300 hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{onClick:Y,className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600",children:"Confirm"})]})]})})]})};export{Ne as default};
