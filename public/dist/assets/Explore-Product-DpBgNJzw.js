import{g as _,w as z,a3 as F,r as c,a as M,a4 as Q,j as e,A as G,L as H,_ as O}from"./main-DA-vLYwL.js";import{B as q}from"./Button-eyYpVHNH.js";import{S as J}from"./ShareToButton-CVeYcVAG.js";import{D as E}from"./Dropdown-CslC-zzG.js";import{C as K}from"./CircularLoader-DpqCMVwK.js";import{R as V}from"./index-BdrbOg9j.js";/* empty css                     */import{A as W}from"./arrow-left-CLRbmHMc.js";import{A as X}from"./arrow-right-Ah2oACqI.js";import"./cn-DUyS5Z8L.js";import"./createLucideIcon-yfTUF5RS.js";const ce=()=>{var j,y,w,N,b,v,k;const{id:L}=_(),{user:t}=z(a=>a.auth),{data:d,isLoading:I,isError:U,error:A}=F({id:L}),s=d==null?void 0:d.data,i=t==null?void 0:t.address,n=s==null?void 0:s.shippingTo,[g,p]=c.useState(!1),R=M(),[$,{isLoading:m}]=Q(),[u,f]=c.useState(null),[x,h]=c.useState(0),S=async a=>{var l,r,C,P,T;try{if(f(null),!((l=t==null?void 0:t.address)!=null&&l.country)||!((r=t==null?void 0:t.address)!=null&&r.postalCode)||!((C=t==null?void 0:t.address)!=null&&C.line1)||!((P=t==null?void 0:t.address)!=null&&P.city)){O.error("Please add your shipping address before checkout. Profile >> Address"),R("/profile");return}const o=await $({productId:a});if((T=o.data)!=null&&T.checkoutUrl)window.location.href=o.data.checkoutUrl;else throw new Error("Checkout URL not received")}catch(o){f("Failed to create checkout. Please try again."),console.error("Error creating checkout:",o)}},B=()=>{h(a=>a===s.imageUrls.length-1?0:a+1)},D=()=>{h(a=>a===0?s.imageUrls.length-1:a-1)};return c.useEffect(()=>{var a;(a=n==null?void 0:n.countries)!=null&&a.some(l=>{var r;return l.toLowerCase()===((r=i==null?void 0:i.country)==null?void 0:r.toLowerCase())})?p(!0):p(!1)},[i,n]),I?e.jsx("p",{children:"Loading..."}):U?(console.error("Error fetching product details:",A),e.jsx("p",{children:"Error loading product details. Please check the console for more information."})):m?e.jsx(G,{}):e.jsxs("div",{className:"flex flex-col gap-4 rounded-lg",children:[e.jsxs("div",{className:"w-full flex md:flex-row flex-col gap-4 md:gap-12 rounded-xl",children:[s.imageUrls.length>0?e.jsxs("div",{className:"relative md:w-1/2 w-full",children:[e.jsx("img",{src:s.imageUrls[x],alt:`${s.title} - Image ${x+1}`,className:"md:h-[30rem] h-[15rem] w-full rounded-2xl object-cover"}),s.imageUrls.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:D,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(W,{className:"w-6 h-6"})}),e.jsx("button",{onClick:B,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(X,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:s.imageUrls.map((a,l)=>e.jsx("button",{onClick:()=>h(l),className:`w-2 h-2 rounded-full ${l===x?"bg-green":"bg-gray-400"}`},l))})]})]}):e.jsx("div",{className:"md:w-1/2 md:h-[30rem] h-[15rem] w-full rounded-2xl overflow-hidden bg-green"}),e.jsxs("div",{className:"md:w-1/2 p-1 flex flex-col md:gap-4 gap-2 justify-center",children:[e.jsx("div",{className:"md:text-4xl max-w-96 text-2xl font-bold break-words",children:s.title}),e.jsx(H,{to:`/explore/brand/${s.brandId}`,className:"text-green underline",children:s.brand}),e.jsx("div",{className:"flex items-center gap-4 md:text-base text-xs",children:e.jsxs("p",{children:["(",s.stock," in stock)"]})}),e.jsxs("p",{className:"flex items-center gap-3",children:[e.jsxs("span",{className:"md:text-3xl text-xl font-semibold",children:[s.wholesalePricing,"€"]}),e.jsxs("span",{className:"line-through text-body/70 text-sm md:text-xl",children:[s.pricing,"€"]}),e.jsx("span",{className:"md:text-xl text-sm text-green",children:`(${(s.pricing-s.wholesalePricing)/s.pricing*100}%)`})]}),e.jsxs("div",{className:"flex font-medium gap-6 items-center my-2 md:my-3",children:[e.jsx("p",{children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx("span",{className:"md:px-3 px-2 md:py-1 py-0.5 md:text-sm text-xs border bg-white-pure rounded md:rounded-lg",children:s.category})})]}),(s==null?void 0:s.description)&&e.jsx(V,{theme:"bubble",readOnly:!0,modules:{toolbar:!1},value:s==null?void 0:s.description}),e.jsxs("div",{className:"mt-4 md:mt-8 flex gap-4 items-start flex-col",children:[e.jsxs("div",{className:"flex gap-4 items-center",children:[e.jsx(E,{options:["1","2","3"],name:"1"}),e.jsx(J,{url:`${window.location.origin}/explore/product/${s._id}`,title:s.title}),e.jsx(q,{onClickHandler:()=>S(s._id),variant:"primary",className:"px-8 py-2",disabledBoolean:m||!g,children:m?e.jsx(K,{}):"Purchase"})]}),!g&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:"Product is not available in your country"}),u&&e.jsx("p",{className:"text-red-500 text-sm mt-2",children:u})]}),s!=null&&s.shippingTo?e.jsx("div",{className:"flex flex-col gap-2 mt-3 bg-white-pure rounded-lg p-3",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsxs("p",{children:["Ships to ",(y=(j=s==null?void 0:s.shippingTo)==null?void 0:j.countries)==null?void 0:y.length," ",((N=(w=s==null?void 0:s.shippingTo)==null?void 0:w.countries)==null?void 0:N.length)===1?"country":"countries"]})]}),((b=s==null?void 0:s.shippingTo)==null?void 0:b.countries)&&e.jsxs("div",{className:"flex flex-wrap gap-1 py-2",children:[s.shippingTo.countries.map((a,l)=>e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:a},l)),((v=s==null?void 0:s.shippingTo)==null?void 0:v.deliveryTime)&&e.jsxs("p",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-md",children:["Estimated delivery: ",s.shippingTo.deliveryTime," days"]})]}),((k=s==null?void 0:s.shippingTo)==null?void 0:k.estimatedDays)&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Estimated delivery: ",s.shippingTo.estimatedDays," days"]})]})}):e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:"grid py-2 place-items-center",children:e.jsx("p",{className:"text-center text-sm capitalize",children:"No shipping information available."})})]})]})]}),e.jsxs("div",{className:"flex justify-between my-4",children:[e.jsx("h2",{className:"md:text-3xl text-xl font-bold w-full",children:"Products you may like"}),e.jsx("div",{className:"w-full text-right",children:e.jsx(E,{options:["category 1","category 2","category 3"],name:"Category"})})]})]})};export{ce as default};
