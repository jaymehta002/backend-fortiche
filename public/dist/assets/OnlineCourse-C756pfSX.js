import{r,j as e,aX as I,aY as Y,a as _,w as q,_ as d}from"./main-rkb-dHu5.js";import{B as k}from"./Button-CvMneL3o.js";import{M as H}from"./Modal-BCQBNMZ8.js";import"./cn-DUyS5Z8L.js";const W=({onClose:o,handleLessonFile:b})=>{const[u,v]=r.useState([]),[j,f]=r.useState(""),[i,c]=r.useState(null),x=t=>{t.preventDefault();const n=Array.from(t.dataTransfer.files);c(n[0])},g=async(t,n)=>{await b(t,n),o()},m=t=>{t.preventDefault()},N=()=>{document.getElementById("file-input").click()};return e.jsx(H,{onClose:o,children:e.jsxs("div",{className:"shadow-lg shadow-green-100 md:w-[28rem] w-[95%] mx-auto bg-blue-lighter rounded-2xl md:p-8 p-4",children:[e.jsx("p",{className:"pb-2 border-b border-grey-light text-xl font-semibold",children:"Course Builder"}),e.jsxs("div",{className:" items-center m-2",children:[e.jsx("label",{className:"font-normal text-base py-2",children:"Lesson Title"}),e.jsx("input",{placeholder:"Lesson Title",className:"w-full my-4 p-2",value:j,onChange:t=>f(t.target.value)})]}),i?e.jsxs("div",{className:"flex items-center gap-4 m-2",children:[e.jsxs("p",{className:"text-green-600",children:["Uploaded File: ",i.name]}),e.jsx("button",{className:"text-red-500 hover:text-red-700 m-2 text-3xl",onClick:()=>c(null),"aria-label":"Remove file",children:"× "})]}):e.jsxs("div",{className:"w-full border border-dashed border-green-500 rounded-lg p-4 text-center cursor-pointer",onClick:N,onDrop:x,onDragOver:m,children:[e.jsx("input",{id:"file-input",type:"file",accept:".mp4",onChange:t=>c(t.target.files[0]),className:"hidden"}),e.jsxs("p",{children:["Drop your video file or"," ",e.jsx("span",{className:"text-green-500 underline cursor-pointer",children:"browse"})]}),e.jsx("p",{className:"text-sm text-gray-500",children:"MP4 only"})]}),e.jsx("div",{className:"mt-2"}),u.length>0&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h3",{className:"text-red-500 font-semibold mb-2",children:"Validation Errors:"}),e.jsx("ul",{className:"text-sm text-red-400",children:u.map((t,n)=>e.jsxs("li",{children:["Row ",t.row,": ",t.errors.join(", ")]},n))})]}),e.jsxs("div",{className:"flex gap-4 mt-6",children:[e.jsx(k,{className:"py-1.5 px-6",variant:"secondary",onClick:o,children:"Cancel"}),e.jsx(k,{className:"py-1.5 px-6",onClick:()=>g(j,i),disabled:u.length>0,children:"Add"})]})]})})},K=()=>{const[o,b]=r.useState([]),[u,v]=r.useState(""),[j,f]=r.useState(null),[i,c]=r.useState(null),[x,g]=r.useState(""),[m,N]=r.useState(""),[t,n]=r.useState(""),[L,S]=r.useState(""),[h,T]=r.useState(null),[U]=I(),[F]=Y(),[O,y]=r.useState(!1),[p,w]=r.useState([]),C=_(),R=q(s=>s.auth.user),E=s=>{w(p.filter(l=>l.title!==s))},M=s=>{c(i===s?null:s)},A=async()=>{if(!h){d.error("Thumbnail is required!");return}const s=await D(h);p.forEach(async a=>{const V=await D(a.video);b([...o,{title:a.title,video:V}])});const l={title:x,customUrl:m,description:t,thumbnail:s,material:o};try{await U(l).unwrap(),d.success("Course created successfully:"),C("/explore/template/online-course")}catch(a){d.error(a.data.message)}},D=async s=>{const l=new FormData;l.append("file",s);const a=await F(l).unwrap();if(a.success)return d.success("File uploaded successfully"),a.data;d.error(a.message)},B=async s=>{try{T(s)}catch(l){d.error(l.data.message)}},P=async(s,l)=>{v(s),f(l),c(!0),w([...p,{title:s,video:l}])};return R.plan=="free"&&(window.location.href="/upgrade-account"),e.jsxs("div",{className:"p-6 max-w-3xl min-h-screen",children:[O&&e.jsx(W,{onClose:()=>y(!1),handleLessonFile:P}),e.jsxs("div",{className:"flex items-center mb-4",children:[e.jsx("button",{className:"mr-4",children:e.jsx("img",{src:"/icons/back_button.svg",onClick:()=>{C("/explore",{state:{activeTab:2}})},alt:"back"})}),e.jsx("h1",{className:"text-3xl font-bold",children:"Online Course"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"font-normal text-base py-2 block",children:"Course Title"}),e.jsx("input",{type:"text",placeholder:"Course Title",value:x,onChange:s=>g(s.target.value),className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4"}),e.jsx("label",{className:"font-normal text-base py-2 block",children:"Custom URL"}),e.jsx("input",{type:"text",placeholder:"URL",value:m,onChange:s=>N(s.target.value),className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-6"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("h3",{className:"font-normal text-base py-2",children:"Description and overview"}),e.jsxs("div",{className:"bg-white-pure border border-green-100 rounded-2xl p-4",children:[e.jsxs("div",{className:"flex items-center mb-2",children:[e.jsxs("select",{className:"border-none outline-none bg-transparent mr-4",children:[e.jsx("option",{children:"Paragraph"}),e.jsx("option",{children:"Header"})]}),e.jsxs("select",{className:"border-none outline-none bg-transparent mr-4",children:[e.jsx("option",{children:"System Font"}),e.jsx("option",{children:"Arial"}),e.jsx("option",{children:"Verdana"})]}),e.jsxs("select",{className:"border-none outline-none bg-transparent mr-4",children:[e.jsx("option",{children:"14 px"}),e.jsx("option",{children:"12 px"}),e.jsx("option",{children:"16 px"})]}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx("button",{className:"font-bold",children:"B"}),e.jsx("button",{className:"italic",children:"I"}),e.jsx("button",{className:"underline",children:"U"}),e.jsx("button",{children:"Y"}),e.jsx("button",{className:"list-disc",children:"•"})]})]}),e.jsx("textarea",{className:"w-full h-40 bg-white-pure border border-green-100 rounded-3xl px-4 py-2",placeholder:"Description for your course",value:t,onChange:s=>n(s.target.value)})]})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"font-normal text-base py-2 block",children:"Pricing"}),e.jsx("input",{type:"text",placeholder:"What's the price of the course?",className:"block w-full bg-white-pure border border-green-100 rounded-3xl px-4 py-2 mb-4",value:L,onChange:s=>S(s.target.value)})]}),e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h3",{className:"font-normal text-base py-2",children:"Thumbnail"}),e.jsx("input",{type:"file",onChange:s=>B(s.target.files[0]),className:"hidden",id:"thumbnail-upload"}),e.jsx("label",{htmlFor:"thumbnail-upload",className:"text-green-600 font-semibold",children:"+ UPLOAD"})]}),h&&e.jsx("img",{className:"w-32 h-32 object-cover rounded-lg",src:URL.createObjectURL(h),alt:"thumbnail"}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsx("h3",{className:"font-normal text-base py-2",children:"Content Material"}),e.jsx("button",{onClick:()=>y(!0),className:"text-green-600 font-semibold",children:"+ ADD"})]}),p.map((s,l)=>e.jsxs("div",{className:"mb-2",children:[e.jsx("button",{onClick:()=>M(l),className:"bg-white-pure border0 rounded-3xl p-4 w-full text-left",children:s.title}),i===l&&e.jsx("div",{className:"p-4 bg-white-pure rounded-3xl",children:e.jsxs("div",{className:"mb-2",children:[e.jsxs("div",{className:"flex flex-row justify-between",children:[e.jsx("div",{className:"text-lg font-bold",children:s.title}),e.jsx("div",{children:s.video&&e.jsxs("video",{controls:!0,width:"120",height:"90",children:[e.jsx("source",{src:URL.createObjectURL(s.video),type:s.video.type}),"Your browser does not support the video tag."]})})]}),e.jsxs("div",{className:"space-x-6 py-4",children:[e.jsx("button",{className:"text-gray-500 border bg-[#f2fffc] rounded-2xl px-2 py-1",children:"Edit Lesson"}),e.jsx("button",{onClick:()=>E(s.title),className:"text-gray-500 border px-4 bg-[#f2fffc] rounded-2xl py-1",children:"Delete Lesson"})]})]})})]},s.title))]}),e.jsx("button",{onClick:A,className:"w-1/5 bg-green-600 text-white-pure py-2 rounded-3xl",children:"Add"})]})};export{K as default};
