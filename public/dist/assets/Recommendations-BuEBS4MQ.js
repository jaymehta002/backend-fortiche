import{w as f,aE as b,aF as v,r as d,a as g,j as s,_ as u,aG as y,A as w}from"./main-rkb-dHu5.js";import{B as j}from"./Button-CvMneL3o.js";import{T as R}from"./deleteIcon-CrBih6VC.js";import{D as M}from"./DeleteProductModal-t-VmeMGY.js";import"./index-DuNlSBVo.js";import"./cn-DUyS5Z8L.js";import"./Modal-BCQBNMZ8.js";const S=({data:e})=>{var a,p;const{user:c}=f(n=>n.auth),[o]=b(),[t]=v(),[l,i]=d.useState(null),[h,m]=d.useState(!1),x=g();d.useEffect(()=>{(async()=>{const r=await o({id:e._id});i(r.data)})()},[]);const N=async()=>{try{await t(e._id),x("/recommendations"),m(!1),u.success("Recommendation deleted successfully")}catch{u.error("Error deleting recommendation")}};return s.jsxs(s.Fragment,{children:[h&&s.jsx(M,{show:h,onClose:()=>m(!1),handleDeleteConfirmed:N}),s.jsxs("div",{className:"bg-white rounded-lg shadow-md overflow-hidden w-[18rem] transform hover:scale-105 transition-transform duration-300",children:[s.jsxs("div",{className:"relative",children:[s.jsx("img",{src:e==null?void 0:e.thumbnail,alt:e==null?void 0:e.title,className:"w-full h-36 object-cover rounded-t-lg"}),s.jsx("button",{onClick:()=>m(!0),className:"absolute top-2 right-2 bg-white p-1 rounded-full shadow hover:bg-red-50 transition",children:s.jsx("img",{src:R,alt:"Trash Icon",className:"w-3.5 h-3.5"})})]}),s.jsxs("div",{className:"p-3",children:[s.jsx("h3",{className:"text-md font-bold text-gray-800 mb-2",children:e==null?void 0:e.title}),s.jsx("p",{className:"text-xs text-gray-600 mb-3 line-clamp-2",children:s.jsx("div",{dangerouslySetInnerHTML:{__html:((a=e==null?void 0:e.content)==null?void 0:a.length)>100?(e==null?void 0:e.content.substring(0,100))+"...":e==null?void 0:e.content}})}),s.jsxs("div",{className:"grid grid-cols-3 gap-2 bg-gray-50 p-3 rounded-lg mb-3 text-xs",children:[s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Price"}),s.jsxs("p",{className:"font-semibold",children:["$",(p=e==null?void 0:e.products)==null?void 0:p.reduce((n,r)=>n+(Number(r==null?void 0:r.pricing)||0),0)]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Sales"}),s.jsxs("p",{className:"font-semibold",children:["$",(l==null?void 0:l.totalSale)||0]})]}),s.jsxs("div",{children:[s.jsx("p",{className:"text-gray-500",children:"Total Sales"}),s.jsx("p",{className:"font-semibold",children:(l==null?void 0:l.totalSaleQty)||0})]})]}),s.jsx("div",{className:"flex flex-wrap gap-1 mb-3",children:(e==null?void 0:e.tags)&&(e==null?void 0:e.tags.length)>0&&s.jsxs("div",{className:"flex flex-wrap gap-1",children:[e==null?void 0:e.tags.flatMap(n=>n.includes(",")?n.split(","):n).slice(0,2).map((n,r)=>s.jsx("span",{className:"bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded-full",children:n.trim()},r)),(e==null?void 0:e.tags.flatMap(n=>n.includes(",")?n.split(","):n).length)>2&&s.jsxs("span",{className:"text-xs text-gray-500",children:["+",(e==null?void 0:e.tags.flatMap(n=>n.includes(",")?n.split(","):n).length)-2]})]})||""}),s.jsx(j,{variant:"primary",className:"w-full text-sm py-1.5",onClick:()=>(c==null?void 0:c.accountType)==="influencer"?x(`/update-recommendation/${e._id}`):x(`/brands/update-recommendation/${e._id}`),children:"Edit Recommendation"})]})]})]})},$=()=>{const e=g(),{user:c}=f(i=>i.auth),{data:o,isLoading:t}=y();if(t)return s.jsx(w,{});const l=o==null?void 0:o.data;return s.jsx("div",{className:"flex flex-col gap-4 px-4 md:px-6 py-8",children:s.jsxs("div",{className:"my-4",children:[s.jsxs("div",{className:"flex md:flex-row flex-col justify-between items-center mb-4",children:[s.jsx("h1",{className:"text-3xl font-bold mb-4",children:"Recommendations"}),s.jsx("div",{children:s.jsx(j,{onClickHandler:()=>e((c==null?void 0:c.accountType)==="brand"?"/brands/create-recommendation":"/create-recommendation"),className:"px-4 py-2",children:"+ New Recommendation"})})]}),s.jsx("div",{className:"flex flex-wrap gap-4",children:(l==null?void 0:l.length)>0?l.map(i=>s.jsx(S,{data:i},i._id)):s.jsx("div",{className:"w-full flex justify-center items-center",children:s.jsx("h1",{className:"text-lg font-medium",children:"No recommendations found."})})})]})})};export{$ as default};
