import{aa as E,o as _,a8 as I,ab as M,r as m,a as D,j as t,_ as l}from"./main-17S3Hvul.js";import{L as U}from"./LinkItemList-DNIlsVzQ.js";import{M as C}from"./MobileView-BZ0iFL_c.js";import{B as F}from"./Button-D9xH6dL9.js";import{C as S}from"./CircularLoader-CjEEfieY.js";import"./deleteIcon-CrBih6VC.js";import"./Modal-DJGYyB_9.js";import"./render-DlHbOUqc.js";import"./x-bcItyjpl.js";import"./createLucideIcon-DUHjy5LS.js";import"./cn-DUyS5Z8L.js";const z=()=>{var d;const{data:n,isLoading:p}=E(),c=_(),u=(d=c==null?void 0:c.data)==null?void 0:d.data,[h]=I(),[x]=M(),[i,r]=m.useState([]),f=D();m.useEffect(()=>{n!=null&&n.data&&r(n.data)},[n]);const b=async s=>{try{const e=new FormData;if(e.append("host",s.host),e.append("url",s.url),e.append("isActive",s.isActive),s.thumbnail instanceof File)e.append("thumbnail",s.thumbnail);else if(typeof s.thumbnail=="string"&&s.thumbnail.startsWith("data:")){const o=await(await fetch(s.thumbnail)).blob(),A=new File([o],"thumbnail.png",{type:"image/png"});e.append("thumbnail",A)}s._id&&(e.append("id",s._id),await h(e).unwrap())}catch(e){console.error("Error saving link:",e),l.error("Error saving link")}},g=async s=>{try{await x(s).unwrap(),r(i.filter(e=>e._id!==s)),l.success("Link deleted successfully")}catch(e){console.error("Error deleting link:",e),l.error("Error deleting link")}},v=(s,e)=>{const a=i[s],o=[...i];o.splice(s,1),o.splice(e,0,a),r(o)},j=s=>{r(i.map(e=>e._id===s?{...e,isActive:!e.isActive}:e))},y=(s,e)=>{r(i.map(a=>a._id===s?{...a,host:e}:a))},L=(s,e)=>{r(i.map(a=>a._id===s?{...a,url:e}:a))},w=(s,e)=>{r(i.map(a=>a._id===s?{...a,thumbnail:e}:a))},N=async s=>{try{await b(s),l.success("Updated Successfully")}catch(e){console.error("Error saving changes:",e),l.error("Error saving changes")}},k=()=>{f("/explore")};return p?t.jsx("div",{children:t.jsx(S,{})}):t.jsx("div",{className:"flex flex-col gap-4 px-4 md:px-6 p-1",children:t.jsxs("div",{className:"my-1",children:[t.jsxs("div",{className:"flex md:flex-row flex-col justify-between items-center",children:[t.jsx("h1",{className:"text-3xl font-bold ",children:"Links"}),t.jsx(F,{variant:"primary",className:"px-3 py-2",onClick:k,children:"Add Links"})]}),t.jsxs("div",{className:"p-2 flex justify-center md:flex-row flex-col",children:[t.jsx("div",{className:"w-full md:mt-16 md:w-1/2",children:i.length>0?t.jsx(U,{linkItems:i,moveLinkItem:v,handleDeleteLink:g,toggleVisibility:j,updateHost:y,updateURL:L,updateThumbnail:w,handleSaveItem:N}):t.jsxs("div",{className:"flex flex-col items-center justify-center h-screen",children:[t.jsx("h1",{className:"text-2xl font-bold",children:"No links found"}),t.jsx("p",{className:"text-lg text-gray-500",children:"Add links to get started"})]})}),t.jsx("div",{className:"w-[1px] hidden md:block my-4 mx-4 bg-[#595D62] h-[90vh]"}),t.jsxs("div",{className:"hidden md:block lg:w-2/5 p-4 shadow rounded-lg",children:[t.jsx("h2",{className:"text-xl font-semibold mb-4",children:"Mobile Preview"}),t.jsx(C,{linkItems:i,user:u,tabid:"Links",products:[]})]})]})]})})};export{z as default};
