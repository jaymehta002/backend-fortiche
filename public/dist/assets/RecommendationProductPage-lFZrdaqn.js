import{a as _,g as A,m as P,k as R,j as s,A as S,_ as F}from"./main-DA-vLYwL.js";import{C as I}from"./CartIcon-DG8RBZdo.js";import{B as n}from"./Button-eyYpVHNH.js";import{R as L}from"./index-BdrbOg9j.js";/* empty css                     */import"./cn-DUyS5Z8L.js";const G=()=>{var f,h,p,g,j,N;const r=_(),{id:w,username:C}=A(),d=C.replace("@",""),{data:a,isLoading:k}=P({id:w}),e=(f=a==null?void 0:a.data)==null?void 0:f.recommendation,{data:o}=R({username:d}),m=`cart_${(h=o==null?void 0:o.data)==null?void 0:h.influencerId}`,u=l=>{const t=Array.isArray(l)?l:[l],i=JSON.parse(localStorage.getItem(m)||"[]");t.forEach(y=>{var b,v;const x=(v=(b=a==null?void 0:a.data)==null?void 0:b.products)==null?void 0:v.find(c=>c._id===y);if(x){const c=i.find(B=>B._id===y);c?c.quantity+=1:i.push({...x,productType:x.productType,quantity:1,recommendation:{author:e==null?void 0:e.author,id:e==null?void 0:e._id,title:e==null?void 0:e.title,thumbnail:e==null?void 0:e.thumbnail}})}}),localStorage.setItem(m,JSON.stringify(i)),F.success("Added to cart successfully"),r(`/${d}/cart`)};return k?s.jsx(S,{}):s.jsxs("div",{className:"flex flex-col px-6 md:px-24 gap-6",children:[s.jsxs("button",{className:"py-4 flex items-center gap-2",onClick:()=>r(-1),children:[s.jsx("img",{src:"/images/CaretDoubleLeft.png",alt:"Back",className:"w-4 h-4"}),s.jsx("span",{className:"text-lg font-medium",children:"Back"})]}),s.jsx("h1",{className:"text-3xl font-bold",children:e==null?void 0:e.title}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"md:w-2/3 flex flex-col gap-6",children:[s.jsx("div",{className:"w-full rounded-xl overflow-hidden",children:s.jsx("img",{src:(e==null?void 0:e.thumbnail)||"placeholder-image-url",alt:e==null?void 0:e.title,className:"w-full h-[400px] object-cover"})}),s.jsx("div",{className:"flex flex-col gap-4",children:s.jsx(L,{readOnly:!0,theme:"bubble",value:e==null?void 0:e.content,modules:{toolbar:!1}})})]}),s.jsx("div",{className:"md:w-1/3 flex flex-col gap-4",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md sticky top-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Product Bundle"}),s.jsx("div",{className:"flex flex-col gap-4",children:(g=(p=a==null?void 0:a.data)==null?void 0:p.products)==null?void 0:g.map((l,t)=>s.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg bg-gray-50",children:[s.jsx("img",{src:l.imageUrls||"placeholder-image-url",alt:l.title||"Product",className:"w-20 h-20 object-cover rounded-md"}),s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold break-words",children:l.title.length>20?l.title.substring(0,20)+"...":l.title}),s.jsx("p",{className:"text-xs text-gray-600",children:l.category||"Category"}),s.jsxs("p",{className:"text-sm font-bold mt-auto",children:[l.pricing,"€"]}),s.jsx(n,{variant:"secondary",onClick:()=>u(l._id),className:"mt-2 py-1 text-sm",children:"Buy only"})]})]},t))}),s.jsxs("div",{className:"mt-4 flex flex-col gap-3 pt-4 border-t",children:[s.jsxs("div",{className:"text-lg font-bold",children:["Total: ",(N=(j=a==null?void 0:a.data)==null?void 0:j.products)==null?void 0:N.reduce((l,t)=>l+(parseFloat(t.pricing)||0),0).toFixed(2),"€"]}),s.jsx(n,{variant:"primary",onClick:()=>{var l,t;return u((t=(l=a==null?void 0:a.data)==null?void 0:l.products)==null?void 0:t.map(i=>i._id))},className:"w-full py-2",children:"Buy Combo"})]})]})})]}),s.jsx("div",{className:"fixed z-50 shadow-xl right-6 bottom-6 rounded-full grid place-items-center",children:s.jsx(n,{variant:"primary",onClick:()=>r(`/${d}/cart`),className:"p-3",children:s.jsx(I,{className:"w-6 h-6"})})})]})};export{G as default};
