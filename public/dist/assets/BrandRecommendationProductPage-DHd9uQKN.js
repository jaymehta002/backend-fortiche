import{a as _,g as P,k as A,m as R,j as s,A as S,_ as F}from"./main-rkb-dHu5.js";import{C as I}from"./CartIcon-CjwAhOLY.js";import{B as o}from"./Button-CvMneL3o.js";import{R as L}from"./index-DuNlSBVo.js";/* empty css                     */import"./cn-DUyS5Z8L.js";const T=()=>{var u,f,h,p,g,j;const i=_(),{id:w,username:C}=P(),x=C.replace("@",""),{data:d}=A({username:x}),{data:l,isLoading:B}=R({id:w}),e=(u=l==null?void 0:l.data)==null?void 0:u.recommendation,n=`cart_${(f=d==null?void 0:d.data)==null?void 0:f.influencerId}`,m=a=>{const t=Array.isArray(a)?a:[a],c=JSON.parse(localStorage.getItem(n)||"[]");t.forEach(N=>{var b,v;const y=(v=(b=l==null?void 0:l.data)==null?void 0:b.products)==null?void 0:v.find(r=>r._id===N);if(y){const r=c.find(k=>k._id===N);r?r.quantity+=1:c.push({...y,quantity:1,recommendation:{author:e==null?void 0:e.author,id:e==null?void 0:e._id,title:e==null?void 0:e.title,thumbnail:e==null?void 0:e.thumbnail}})}}),localStorage.setItem(n,JSON.stringify(c)),F.success("Added to cart successfully"),i(`/b/${x}/cart`)};return B?s.jsx(S,{}):s.jsxs("div",{className:"flex flex-col px-6 md:px-24 gap-6",children:[s.jsxs("button",{className:"py-4 flex items-center gap-2",onClick:()=>i(-1),children:[s.jsx("img",{src:"/images/CaretDoubleLeft.png",alt:"Back",className:"w-4 h-4"}),s.jsx("span",{className:"text-lg font-medium",children:"Back"})]}),s.jsx("h1",{className:"text-3xl font-bold",children:e==null?void 0:e.title}),s.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[s.jsxs("div",{className:"md:w-2/3 flex flex-col gap-6",children:[s.jsx("div",{className:"w-full rounded-xl overflow-hidden",children:s.jsx("img",{src:(e==null?void 0:e.thumbnail)||"placeholder-image-url",alt:e==null?void 0:e.title,className:"w-full h-[400px] object-cover"})}),s.jsx("div",{className:"flex flex-col gap-4",children:s.jsx(L,{readOnly:!0,theme:"bubble",value:e==null?void 0:e.content,modules:{toolbar:!1}})})]}),s.jsx("div",{className:"md:w-1/3 flex flex-col gap-4",children:s.jsxs("div",{className:"bg-white p-4 rounded-lg shadow-md sticky top-6",children:[s.jsx("h2",{className:"text-xl font-bold mb-4",children:"Product Bundle"}),s.jsx("div",{className:"flex flex-col gap-4",children:(p=(h=l==null?void 0:l.data)==null?void 0:h.products)==null?void 0:p.map((a,t)=>s.jsxs("div",{className:"flex gap-3 p-3 border rounded-lg bg-gray-50",children:[s.jsx("img",{src:a.imageUrls||"placeholder-image-url",alt:a.title||"Product",className:"w-20 h-20 object-cover rounded-md"}),s.jsxs("div",{className:"flex flex-col flex-1",children:[s.jsx("h3",{className:"text-sm font-semibold",children:a.title||"Product Title"}),s.jsx("p",{className:"text-xs text-gray-600",children:a.category||"Category"}),s.jsxs("p",{className:"text-sm font-bold mt-auto",children:[a.pricing,"€"]}),s.jsx(o,{variant:"secondary",onClick:()=>m(a._id),className:"mt-2 py-1 text-sm",children:"Buy only"})]})]},t))}),s.jsxs("div",{className:"mt-4 flex flex-col gap-3 pt-4 border-t",children:[s.jsxs("div",{className:"text-lg font-bold",children:["Total: ",(j=(g=l==null?void 0:l.data)==null?void 0:g.products)==null?void 0:j.reduce((a,t)=>a+(parseFloat(t.pricing)||0),0).toFixed(2),"€"]}),s.jsx(o,{variant:"primary",onClick:()=>{var a,t;return m((t=(a=l==null?void 0:l.data)==null?void 0:a.products)==null?void 0:t.map(c=>c._id))},className:"w-full py-2",children:"Buy Combo"})]})]})})]}),s.jsx("div",{className:"fixed z-50 shadow-xl right-6 bottom-6 rounded-full grid place-items-center",children:s.jsx(o,{variant:"primary",onClick:()=>i("/brands/cart"),className:"p-3",children:s.jsx(I,{className:"w-6 h-6"})})})]})};export{T as default};
