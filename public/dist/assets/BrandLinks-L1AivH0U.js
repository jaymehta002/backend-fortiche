import{aa as E,o as _,a8 as k,ab as I,r as m,a as U,j as a,_ as c}from"./main-rkb-dHu5.js";import{L as B}from"./LinkItemList-DA2VZMLw.js";import{B as C}from"./Button-CvMneL3o.js";import{C as D}from"./CircularLoader-ByPKQ32Q.js";import"./deleteIcon-CrBih6VC.js";import"./Modal-_2ayBxly.js";import"./render-BxJVqWkM.js";import"./x-6k1wTkVV.js";import"./createLucideIcon-Rsg1P1ng.js";import"./cn-DUyS5Z8L.js";const V=()=>{var l;const{data:n,isLoading:p}=E(),d=_();(l=d==null?void 0:d.data)==null||l.data;const[u]=k(),[h]=I(),[i,r]=m.useState([]),f=U();m.useEffect(()=>{n!=null&&n.data&&r(n.data)},[n]);const x=async t=>{try{const e=new FormData;if(e.append("host",t.host),e.append("url",t.url),e.append("isActive",t.isActive),t.thumbnail instanceof File)e.append("thumbnail",t.thumbnail);else if(typeof t.thumbnail=="string"&&t.thumbnail.startsWith("data:")){const o=await(await fetch(t.thumbnail)).blob(),A=new File([o],"thumbnail.png",{type:"image/png"});e.append("thumbnail",A)}t._id&&(e.append("id",t._id),await u(e).unwrap())}catch(e){console.error("Error saving link:",e),c.error("Error saving link")}},g=async t=>{try{await h(t).unwrap(),r(i.filter(e=>e._id!==t)),c.success("Link deleted successfully")}catch(e){console.error("Error deleting link:",e),c.error("Error deleting link")}},b=(t,e)=>{const s=i[t],o=[...i];o.splice(t,1),o.splice(e,0,s),r(o)},v=t=>{r(i.map(e=>e._id===t?{...e,isActive:!e.isActive}:e))},L=(t,e)=>{r(i.map(s=>s._id===t?{...s,host:e}:s))},y=(t,e)=>{r(i.map(s=>s._id===t?{...s,url:e}:s))},j=(t,e)=>{r(i.map(s=>s._id===t?{...s,thumbnail:e}:s))},w=async t=>{try{await x(t),c.success("Updated Successfully")}catch(e){console.error("Error saving changes:",e),c.error("Error saving changes")}},N=()=>{f("/brands/template")};return p?a.jsx("div",{children:a.jsx(D,{})}):a.jsx("div",{className:"flex flex-col gap-4 p-4 md:p-6",children:a.jsxs("div",{className:"w-full",children:[a.jsxs("div",{className:"flex md:flex-row flex-col justify-between items-center mb-6",children:[a.jsx("h1",{className:"text-3xl font-bold",children:"Links"}),a.jsx(C,{variant:"primary",className:"px-4 py-2 mt-4 md:mt-0",onClick:N,children:"Add Links"})]}),i.length>0?a.jsx("div",{className:"flex flex-col gap-4",children:a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:a.jsx(B,{linkItems:i,moveLinkItem:b,handleDeleteLink:g,toggleVisibility:v,updateHost:L,updateURL:y,updateThumbnail:j,handleSaveItem:w})})}):a.jsxs("div",{className:"flex flex-col items-center justify-center min-h-[400px]",children:[a.jsx("h1",{className:"text-2xl font-bold",children:"No links found"}),a.jsx("p",{className:"text-lg text-gray-500",children:"Add links to get started"})]})]})})};export{V as default};
