import{w as v,aU as j,aV as N,aW as y,v as T,a as A,r as c,j as e,_ as o}from"./main-rkb-dHu5.js";function _(){const{user:r}=v(s=>s.auth),[d]=j(),[p]=N(),[m]=y(),{data:t,refetch:u}=T(r._id),g=A(),[n,i]=c.useState([]);c.useState(null),c.useState(""),c.useEffect(()=>{t&&t.length>0&&i(t[0].amounts)},[t]);const x=(s,a)=>{const l=[...n];l[s]=Number(a),i(l)},h=()=>{i([...n,0])},f=s=>{i(n.filter((a,l)=>l!==s))},b=async()=>{var s;if(n.length!==0)try{t&&t.length>0?(await p({id:r._id,amounts:n}).unwrap(),o.success("Tipping updated successfully")):(await d({influencerId:r._id,amounts:n}).unwrap(),o.success("Tipping created successfully")),await u()}catch(a){o.error(((s=a.data)==null?void 0:s.message)||"Failed to save tipping")}},w=async()=>{var s;try{await m(r._id).unwrap(),o.success("Tipping removed successfully"),i([]),await u()}catch(a){o.error(((s=a.data)==null?void 0:s.message)||"Failed to remove tipping")}};return e.jsxs("div",{className:"p-8 rounded-lg w-full max-w-2xl",children:[e.jsxs("div",{className:"flex flex-row space-x-4 items-center mb-4",children:[e.jsx("button",{onClick:()=>g("/explore",{state:{activeTab:2}}),className:"mb-2",children:e.jsx("img",{src:"/icons/back_button.svg",alt:"back"})}),e.jsx("h1",{className:"text-2xl font-bold",children:"Tipping"})]}),e.jsxs("div",{className:"mb-4 flex flex-row justify-between",children:[e.jsx("h3",{className:"text-lg font-bold mb-2",children:"Amounts:"}),e.jsx("button",{onClick:h,className:"text-green-500 font-semibold underline cursor-pointer",children:"+ Add"})]}),e.jsx("div",{className:"mb-4 w-full",children:e.jsx("ul",{className:"w-full",children:n.length>0?n.map((s,a)=>e.jsxs("li",{className:"flex items-center mb-2",children:[e.jsx("input",{type:"number",value:s,onChange:l=>x(a,l.target.value),className:"w-full border rounded-full px-3 py-2 focus:outline-none focus:ring-2 focus:ring-green-500"}),e.jsx("button",{onClick:()=>f(a),className:"rounded-full bg-white-pure px-3 py-2 m-3",children:"âœ–"})]},a)):e.jsx("div",{className:"text-center text-gray-500 mt-10",children:"No tipping amounts available."})})}),e.jsxs("div",{className:"flex flex-row gap-4",children:[e.jsxs("button",{onClick:b,className:`py-2 px-4 bg-green-500 text-white font-semibold rounded-3xl shadow ${n.length?"hover:bg-green-600":"opacity-50 cursor-not-allowed"}`,disabled:!n.length,children:[(t==null?void 0:t.length)>0?"Update":"Add"," Tipping"]}),(t==null?void 0:t.length)>0&&e.jsx("button",{onClick:w,className:"py-2 px-4 bg-red-500 text-white font-semibold rounded-3xl shadow hover:bg-red-600",children:"Remove Tipping"})]})]})}export{_ as default};
