import{a as $,g as T,h as z,i as M,k as Q,r as f,j as e,A as q}from"./main-DA-vLYwL.js";import{C as B}from"./CartIcon-DG8RBZdo.js";import{B as k}from"./Button-eyYpVHNH.js";import{D as A}from"./Dropdown-CslC-zzG.js";import{C as D}from"./CircularLoader-DpqCMVwK.js";import"./cn-DUyS5Z8L.js";import{R as F}from"./index-BdrbOg9j.js";import{A as G}from"./arrow-left-CLRbmHMc.js";import{A as O}from"./arrow-right-Ah2oACqI.js";import"./createLucideIcon-yfTUF5RS.js";const te=()=>{var j,y,N,b,v,w,I,C;const c=$(),{id:i}=T(),{data:m,isLoading:L}=z({affiliationId:i}),s=m==null?void 0:m.data,{data:x}=M(i),r=(j=x==null?void 0:x.data)==null?void 0:j.influencerId,{username:S}=T(),u=S.replace("@",""),{data:n,isLoading:U}=Q({username:u}),d=f.useMemo(()=>{var t;const a=r||((t=n==null?void 0:n.data)==null?void 0:t.influencerId);return a?`cart_${a}`:null},[r,n]),[g,p]=f.useState(0),[P,h]=f.useState(!1),R=async()=>{if(!(!d||!s)){h(!0);try{const a=JSON.parse(localStorage.getItem(d))||[],t=s._id||s.id,o=a.findIndex(l=>(l._id||l.id)===t&&l.affiliationId===i&&l.influencerId===r);if(o!==-1)a[o]={...a[o],quantity:(a[o].quantity||0)+1};else{const l={...s,_id:t,id:t,productType:s.productType==="downloadable"?"downloadable":"physical",quantity:1,affiliationId:i,influencerId:r};a.push(l)}localStorage.setItem(d,JSON.stringify(a)),c(`/${u}/cart`)}catch(a){console.error("Error adding to cart:",a),h(!1)}finally{h(!1)}}},E=()=>{p(a=>a===s.imageUrls.length-1?0:a+1)},_=()=>{p(a=>a===0?s.imageUrls.length-1:a-1)};return console.log(d),L||U||!s||!r?e.jsx(q,{}):e.jsxs("div",{className:"flex flex-col px-24 gap-4 rounded-lg",children:[e.jsxs("button",{className:"py-16",onClick:()=>c(-1),children:[e.jsx("img",{src:"/images/CaretDoubleLeft.png"})," "]}),e.jsxs("div",{className:"w-full flex md:flex-row flex-col gap-4 md:gap-12 rounded-xl",children:[s.imageUrls.length>0?e.jsxs("div",{className:"relative md:w-1/2 w-full",children:[e.jsx("img",{src:s.imageUrls[g],alt:`${s.title} - Image ${g+1}`,className:"md:h-[30rem] h-[15rem] w-full rounded-2xl object-cover"}),s.imageUrls.length>1&&e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:_,className:"absolute left-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(G,{className:"w-6 h-6"})}),e.jsx("button",{onClick:E,className:"absolute right-2 top-1/2 -translate-y-1/2 bg-black/50 text-white p-2 rounded-full hover:bg-black/70",children:e.jsx(O,{className:"w-6 h-6"})}),e.jsx("div",{className:"absolute bottom-2 left-1/2 -translate-x-1/2 flex gap-2",children:s.imageUrls.map((a,t)=>e.jsx("button",{onClick:()=>p(t),className:`w-2 h-2 rounded-full ${t===g?"bg-green":"bg-gray-400"}`},t))})]})]}):e.jsx("div",{className:"md:w-1/2 md:h-[30rem] h-[15rem] w-full rounded-2xl overflow-hidden bg-green"}),e.jsxs("div",{className:"md:w-1/2 p-1 flex flex-col md:gap-4 gap-2 justify-center",children:[e.jsx("p",{className:"md:text-5xl text-2xl font-bold break-words",children:s.title}),e.jsx("div",{className:"flex items-center gap-4 md:text-base text-xs",children:e.jsxs("p",{children:["(",s.stock," in stock) ",s.rating,"/5.00"]})}),e.jsx("p",{className:"flex items-center gap-3",children:e.jsxs("span",{className:"md:text-3xl text-xl font-semibold",children:[s.pricing,"â‚¬"]})}),e.jsxs("div",{className:"flex font-medium gap-6 items-center my-2 md:my-3",children:[e.jsx("p",{children:"Category"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:e.jsx("span",{className:"md:px-3 px-2 md:py-1 py-0.5 md:text-sm text-xs border bg-white-pure rounded md:rounded-lg",children:s.category})})]}),e.jsx(F,{theme:"bubble",readOnly:!0,modules:{toolbar:!1},value:s==null?void 0:s.description}),e.jsxs("div",{className:"mt-4 md:mt-8 flex gap-4 items-center",children:[e.jsx(A,{options:["1","2","3"],name:"1"}),e.jsx(k,{variant:"primary",onClick:R,className:"px-6 py-2",children:P?e.jsx(D,{}):"Add to cart"})]}),s!=null&&s.shippingTo?e.jsx("div",{className:"flex flex-col gap-2 mt-3 bg-white-pure rounded-lg p-3",children:e.jsxs("div",{className:"text-sm space-y-1",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-primary",viewBox:"0 0 20 20",fill:"currentColor",children:e.jsx("path",{fillRule:"evenodd",d:"M5.05 4.05a7 7 0 119.9 9.9L10 18.9l-4.95-4.95a7 7 0 010-9.9zM10 11a2 2 0 100-4 2 2 0 000 4z",clipRule:"evenodd"})}),e.jsxs("p",{children:["Ships to ",(N=(y=s==null?void 0:s.shippingTo)==null?void 0:y.countries)==null?void 0:N.length," ",((v=(b=s==null?void 0:s.shippingTo)==null?void 0:b.countries)==null?void 0:v.length)===1?"country":"countries"]})]}),((w=s==null?void 0:s.shippingTo)==null?void 0:w.countries)&&e.jsxs("div",{className:"flex flex-wrap gap-1 py-2",children:[s.shippingTo.countries.map((a,t)=>e.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:a},t)),((I=s==null?void 0:s.shippingTo)==null?void 0:I.deliveryTime)&&e.jsxs("p",{className:"text-xs bg-green-100 text-green-700 px-2 py-0.5 rounded-md",children:["Estimated delivery: ",s.shippingTo.deliveryTime," days"]})]}),((C=s==null?void 0:s.shippingTo)==null?void 0:C.estimatedDays)&&e.jsxs("p",{className:"text-xs text-gray-600",children:["Estimated delivery: ",s.shippingTo.estimatedDays," days"]})]})}):e.jsxs(e.Fragment,{children:[" ",e.jsx("div",{className:"grid py-2 place-items-center",children:e.jsx("p",{className:"text-center text-sm capitalize",children:"No shipping information available."})})]})]})]}),e.jsxs("div",{className:"flex justify-between my-4",children:[e.jsx("h2",{className:"md:text-3xl text-xl font-bold w-full",children:"Products you may like"}),e.jsx("div",{className:"w-full text-right",children:e.jsx(A,{options:["category 1","category 2","category 3"],name:"Category"})})]}),e.jsx("div",{className:"flex md:flex-row justify-center flex-wrap gap-4"}),e.jsx("div",{className:"fixed z-50 shadow-xl right-6 lg:right-8 bottom-4 lg:bottom-6 rounded-full grid place-items-center",children:e.jsx(k,{variant:"primary",onClick:()=>c("/cart"),className:"p-3",children:e.jsx(B,{className:"w-6 h-6"})})})]})};export{te as default};
