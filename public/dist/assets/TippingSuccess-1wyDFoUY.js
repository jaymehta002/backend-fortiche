import{r as s,G as m,_ as i,j as e,A as y}from"./main-DA-vLYwL.js";const w=()=>{const t=new URLSearchParams(window.location.search).get("session_id"),[f,a]=s.useState(!1),[x]=m(),[o,l]=s.useState(!1),u=s.useRef(!1),[j,h]=s.useState(null);s.useEffect(()=>{!u.current&&t&&(u.current=!0,p(t))},[t]);const p=async n=>{var d;if(!o){if(!n||typeof n!="string"){i.error("Invalid session ID");return}try{l(!0);const r=n.trim(),c=await x({session_id:r}).unwrap();c.success?(a(!0),h(c.breakdown),i.success("Thank you for your tip!")):i.error(c.message||"Could not verify the tip")}catch(r){console.error("Verification error:",r),i.error(((d=r.data)==null?void 0:d.message)||"Failed to verify the tip"),a(!1)}finally{l(!1)}}};return t?e.jsx(e.Fragment,{children:o?e.jsx(y,{}):e.jsxs("div",{className:"flex flex-col items-center justify-center bg-white-pure h-screen text-center",children:[e.jsx("div",{className:"text-2xl font-semibold text-black mb-4",children:"Thank You For Your Tip!"}),e.jsx("div",{className:"w-16 h-16 flex items-center justify-center mb-4",children:e.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",width:"50",height:"50",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",className:"lucide lucide-circle-check-big",children:[e.jsx("path",{d:"M21.801 10A10 10 0 1 1 17 3.335"}),e.jsx("path",{d:"m9 11 3 3L22 4"})]})}),e.jsx("div",{className:"text-lg font-bold text-black mb-2",children:f?"Tip Sent Successfully!":"Verifying your tip..."}),e.jsx("a",{href:"/",className:"text-pink-500 hover:underline",children:"Return Home"})]})}):e.jsx("div",{className:"flex flex-col items-center justify-center bg-white-pure h-screen text-center",children:e.jsx("div",{className:"text-xl text-red-500",children:"Invalid session. Missing session ID."})})};export{w as default};
