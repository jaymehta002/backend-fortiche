import{r as u,j as e,e as I,B as N,_ as f,a as k,u as C,p as b,d as L,N as S,c as P}from"./main-17S3Hvul.js";import{u as w,I as g,b as F,c as E,d as T}from"./InputField-DhUJ8jJ9.js";import{B as p}from"./Button-D9xH6dL9.js";import{C as j}from"./CircularLoader-CjEEfieY.js";import{C as O,A as B}from"./AccountType-Ct0sAj6p.js";import{S as A}from"./UserNameInput-DJsDWhaU.js";import"./createLucideIcon-DUHjy5LS.js";import"./eye-Bp5EXDuR.js";import"./cn-DUyS5Z8L.js";const R=({setIsForget:s})=>{const[a,t]=u.useState(!1),{register:l,handleSubmit:d,formState:{errors:c}}=w({mode:"onChange"}),m=async h=>{t(!0);try{const n=await I.post(`${N}/api/v1/auth/forgot-password`,h);f.success("Email sent successfully")}catch(n){console.error("Error registering user:",n)}finally{t(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"font-bold text-2xl md:text-3xl",children:"Forgot your Password ?"}),e.jsx("p",{className:"my-4",children:"Enter your email to retrieve it"}),e.jsxs("form",{onSubmit:d(m),className:"flex flex-col gap-4 mt-12",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(g,{type:"email",name:"email",className:"mt-2",placeholder:"email",register:l,validate:F,errors:c})]}),e.jsx(p,{type:"submit",variant:"primary",className:"py-2 mt-8",children:a?e.jsx(j,{}):"Submit"}),!1,e.jsxs("p",{className:"w-full mt-4 text-green cursor-pointer text-right",onClick:()=>s(!1),children:[e.jsx("span",{className:"mr-2",children:"⟨"})," Back to Login"]})]})]})},$=R,G=()=>{k();const[s,a]=u.useState(!1),t=()=>{a(!0),window.open(`${N}/api/v1/auth/google`,"_self")};return e.jsx("div",{children:s?e.jsxs(p,{variant:"secondary",className:"flex gap-2 items-center justify-center px-4 py-2 font-semibold w-full bg-white-pure rounded-3xl my-4",children:[e.jsx("img",{src:"/icons/google.svg",className:"w-4",alt:""}),"Signing in..."]}):e.jsxs(p,{variant:"secondary",onClickHandler:t,className:"flex gap-2 items-center justify-center px-4 py-2 font-semibold w-full bg-white-pure rounded-3xl my-4",children:[e.jsx("img",{src:"/icons/google.svg",className:"w-4",alt:""}),"Sign in with Google"]})})},U=({setIsForget:s})=>{const[a,t]=u.useState(!1),{register:l,handleSubmit:d,formState:{errors:c}}=w({mode:"onChange"}),m=C(),h=async n=>{var r,o;try{t(!0);const i=await b("/auth/login",n);(r=i==null?void 0:i.data)!=null&&r.tokens&&(localStorage.setItem("accessToken",i.data.tokens.accessToken),localStorage.setItem("refreshToken",i.data.tokens.refreshToken)),m(L((o=i==null?void 0:i.data)==null?void 0:o.user))}catch(i){f.error(i.message)}finally{t(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"font-bold text-2xl md:text-3xl",children:"Kindly provide your login information"}),e.jsx("p",{className:"my-4 md:w-4/5 w-full ",children:"Opt for Google Sign-In or enter your details manually by populating the fields below"}),e.jsx(G,{}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("div",{className:"flex-grow border-t"}),e.jsx("span",{className:"mx-4 font-semibold",children:"Or"}),e.jsx("div",{className:"flex-grow border-t"})]}),e.jsxs("form",{onSubmit:d(h),className:"flex flex-col gap-2 w-full",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx(g,{id:"usernameOrEmail",type:"text",name:"usernameOrEmail",className:"mt-1",placeholder:"Username or Email",register:l,errors:c})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx(g,{id:"password",type:"password",name:"password",className:"mt-1",placeholder:"Password",register:l,errors:c})]}),e.jsx(p,{type:"submit",variant:"primary",className:"py-2 mt-8",disabledBoolean:a,children:a?e.jsx("span",{children:e.jsx(j,{})}):e.jsx("span",{children:"Login to your account"})}),e.jsx("p",{className:"text-xs w-full italic text-right hover:text-blue cursor-pointer",onClick:()=>s(!0),children:"Forget your Password ?"})]})]})},_=U;function H({nextStep:s}){const a=()=>{const t=window.open(`${N}/api/v1/auth/google`),l=setInterval(()=>{t.closed&&(clearInterval(l),s())},1e3)};return e.jsx(e.Fragment,{children:e.jsxs(p,{variant:"secondary",onClickHandler:a,className:"flex gap-2 items-center justify-center px-4 py-2 font-semibold w-full bg-white-pure rounded-3xl my-4",children:[e.jsx("img",{src:"/icons/google.svg",className:"w-4",alt:""}),"Sign up with Google"]})})}const V=({nextStep:s,formData:a,setFormFields:t})=>{const[l,d]=u.useState(!1),{register:c,handleSubmit:m,watch:h,formState:{errors:n}}=w({mode:"onChange",defaultValues:a}),r=async o=>{try{d(!0);const{confirmPassword:i,...y}=o;t(y),s()}catch{f.error("An error occurred")}finally{d(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"font-bold text-2xl md:text-3xl",children:"Create an account"}),e.jsx("p",{className:"my-4 md:w-4/5 w-full",children:"Begin your adventure as an influencer or brand and make earnings like an expert with Fortiche"}),e.jsx(H,{nextStep:s}),e.jsxs("div",{className:"flex items-center my-6",children:[e.jsx("div",{className:"flex-grow border-t"}),e.jsx("span",{className:"mx-4 font-semibold",children:"Or"}),e.jsx("div",{className:"flex-grow border-t"})]}),e.jsxs("form",{action:"",onSubmit:m(r),className:"flex flex-col gap-2",children:[e.jsxs("div",{children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(g,{type:"email",name:"email",placeholder:"email",className:"mt-1",register:c,validate:F,errors:n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Password"}),e.jsx(g,{type:"password",name:"password",placeholder:"Password",className:"mt-1",register:c,validate:E,errors:n})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"password",children:"Confirm Password"}),e.jsx(g,{type:"password",name:"confirmPassword",placeholder:"Confirm Password",className:"mt-1",register:c,validate:o=>o===h("password")||"Passwords do not match",errors:n})]}),e.jsx(p,{type:"submit",variant:"primary",className:"py-2 mt-6",children:l?e.jsx(j,{}):"Create Account"})]})]})},D=({nextStep:s,formData:a,setFormFields:t})=>{const[l,d]=u.useState([S[0]]),[c,m]=u.useState(!1),h=r=>{d(o=>o.includes(r)?o.filter(i=>i!==r):[...o,r])},n=async()=>{try{m(!0),await b("/auth/register",a),t({categories:l}),s(),m(!1)}catch(r){f.error(r.message),m(!1)}finally{m(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsx("p",{className:"font-semibold text-lg my-4",children:"Choose your niche"}),e.jsx("div",{className:"flex flex-wrap gap-4 my-8",children:S.map(r=>e.jsx("div",{className:`w-fit transition hover:bg-green ${l.includes(r)?"bg-green text-white-pure":"bg-blue-lighter "} rounded-md cursor-pointer`,onClick:()=>h(r),children:e.jsx("p",{className:"w-max text-sm p-2",children:e.jsx("span",{className:"mr-3",children:r})})},r))}),e.jsx(p,{variant:"primary",className:"py-2 w-full",onClickHandler:n,disabledBoolean:c,children:c?e.jsx("span",{children:e.jsx(j,{})}):e.jsx("span",{children:"Continue"})})]})},W=({formData:s})=>{const[a,t]=u.useState(!1),l=C(),{register:d,handleSubmit:c,formState:{errors:m}}=w({mode:"onChange",defaultValues:s}),h=async n=>{var r,o,i,y,v;try{t(!0);const x=await b("/auth/verify-otp",{...s,...n});x!=null&&x.data&&(localStorage.setItem("accessToken",(o=(r=x==null?void 0:x.data)==null?void 0:r.tokens)==null?void 0:o.accessToken),localStorage.setItem("refreshToken",(y=(i=x==null?void 0:x.data)==null?void 0:i.tokens)==null?void 0:y.refreshToken),l(L((v=x==null?void 0:x.data)==null?void 0:v.user))),t(!1)}catch(x){f.error(x.message),t(!1)}finally{t(!1)}};return e.jsxs("div",{className:"w-full",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-bold text-2xl md:text-3xl",children:"Enter OTP"}),e.jsx("p",{className:"my-4",children:"Setup your profile on Fortiche by walking through this mini onboarding process, where you need to fill up these information."})]}),e.jsxs("form",{action:"",onSubmit:c(h),className:"flex flex-col gap-4",children:[e.jsx("div",{children:e.jsx(g,{type:"number",name:"otp",placeholder:"Enter OTP",onWheel:n=>n.target.blur(),validate:T,className:"mt-2 [appearance:textfield] [&::-webkit-inner-spin-button]:appearance-none [&::-webkit-outer-spin-button]:appearance-none",register:d,errors:m})}),e.jsx(p,{type:"submit",variant:"primary",className:"py-2 mt-4",disabledBoolean:a,children:a?e.jsx("span",{children:e.jsx(j,{})}):e.jsx("span",{children:"Sign Up"})})]})]})},q=()=>{const[s,a]=u.useState(1),[t,l]=u.useState({}),d=o=>{l(i=>({...i,...o}))},c=k(),m=()=>{s<Object.keys(n).length?a(o=>o+1):c("/")},h=()=>{s<=Object.keys(n).length&&a(o=>o-1)},n={1:V,2:O,3:B,4:D,5:W},r=n[s];return e.jsxs("div",{children:[s!==1&&s!==5&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("span",{className:"text-3xl font-semibold cursor-pointer",onClick:h,children:"←"}),e.jsx("h2",{className:"font-bold text-2xl md:text-3xl",children:"Account Setup"})]}),e.jsx("p",{className:"my-4",children:"Setup your profile on Fortiche by walking through this mini onboarding process, where you need to fill up these information."}),e.jsx(A,{totalSteps:Object.keys(n).length-1,currentStep:s-2,className:"my-8"})]}),e.jsx(r,{nextStep:m,formData:t,setFormFields:d})]})},K=q;function ae(){const[s,a]=u.useState(!0),[t,l]=u.useState(!1),d=()=>{a(!0),l(!1)};return e.jsx("div",{className:"h-screen p-6 md:p-12",children:e.jsxs("div",{className:"flex h-full gap-12 justify-center",children:[e.jsxs("div",{className:"md:w-[36rem] w-full flex flex-col justify-between h-full",children:[e.jsx(P,{}),e.jsx("div",{className:"my-8",children:t?e.jsx($,{setIsForget:l}):s?e.jsx(_,{setIsLogin:a,setIsForget:l}):e.jsx(K,{setIsLogin:a})}),e.jsx("div",{className:"md:py-0 py-4 my-2 text-center md:text-left",children:t?e.jsxs("p",{children:["Remember your password?"," ",e.jsx("span",{className:"text-green cursor-pointer",onClick:d,children:"Log into your account"})]}):s?e.jsxs("p",{children:["New to Fortiche?"," ",e.jsx("span",{className:"text-green cursor-pointer",onClick:()=>a(!1),children:"Create an account"})]}):e.jsxs("p",{children:["Already a user?"," ",e.jsx("span",{className:"text-green cursor-pointer",onClick:()=>a(!0),children:"Log into your account"})]})})]}),e.jsx("div",{className:"md:w-[36rem] md:block hidden",children:e.jsx("img",{src:"/images/login-image.svg",alt:"login-image",className:"h-full w-full"})})]})})}export{ae as default};
