import{r as w,af as I,ad as A,aJ as D,j as e,_ as f,aK as O,w as S,aL as R,aM as M,a as T,aN as q,an as B,W as z,t as _}from"./main-rkb-dHu5.js";import{T as H}from"./Tab-DLd86LDA.js";import{S as P,L as $,D as Q,P as V}from"./ProfileSetting-B4wXAtON.js";import{B as C}from"./Button-CvMneL3o.js";import{u as E,I as L,v as G,a as Y,b as J}from"./InputField--WdItIgk.js";import{C as F}from"./CircularLoader-ByPKQ32Q.js";import{U as K}from"./user-round-Fh_o0VMQ.js";import{T as W}from"./trash-DfBzRkud.js";import"./cn-DUyS5Z8L.js";import{s as Z}from"./search-ARtRfbrc.js";import{C as X,a as ee}from"./chevron-right-BUP4X5Z3.js";import"./createLucideIcon-Rsg1P1ng.js";import"./ShareToButton-DHO7nuu7.js";import"./Modal-_2ayBxly.js";import"./render-BxJVqWkM.js";import"./x-6k1wTkVV.js";import"./index-DuNlSBVo.js";/* empty css                   */import"./eye-y4_ED_9k.js";const se=({data:a})=>{const[l,t]=w.useState(!1),[n,{isLoading:m}]=I(),[i,{isLoading:b}]=A(),[x,{isLoading:N}]=D(),{register:u,handleSubmit:g,formState:{errors:c}}=E({mode:"onChange",defaultValues:{username:a.username,fullName:a.fullName,email:a.email,bio:a.bio||""}}),[p,o]=w.useState((a==null?void 0:a.avatar)||"/avatar.png"),j=async h=>{var s;try{const r={username:h.username,fullName:h.fullName,email:h.email,bio:((s=h.bio)==null?void 0:s.trim())||""};await n(r).unwrap(),t(!1),f.success("Profile updated successfully")}catch(r){console.error("Error updating credentials:",r),f.error("Couldn't update Profile")}},d=async h=>{try{const s=h.target.files[0];if(!s)return;const r=URL.createObjectURL(s);o(r);const v=new FormData;v.append("avatar",s),await i(v),f.success("Avatar updated successfully")}catch(s){o((a==null?void 0:a.avatar)||"/avatar.png"),console.error("Error updating avatar:",s),f.error("Couldn't update avatar")}finally{URL.revokeObjectURL(p)}},y=async()=>{try{await x(),o("/avatar.png"),f.success("Avatar removed successfully")}catch(h){console.error("Error removing avatar:",h),f.error("Couldn't remove avatar")}};return e.jsxs("form",{onSubmit:g(j),className:"flex flex-col gap-4 w-full",children:[e.jsxs("div",{children:[e.jsx("p",{className:"font-bold",children:"Change your Profile Picture (Click on the image)"}),e.jsxs("div",{className:"relative",children:[l&&e.jsx(e.Fragment,{children:e.jsx(P,{className:"absolute cursor-pointer left-16 top-10 text-gray-800 p-1 w-6 h-6 rounded-full bg-white",size:16})}),e.jsx("input",{type:"file",id:"avatar",accept:"image/*",onChange:d,className:"hidden"}),e.jsxs("label",{htmlFor:"avatar",className:"cursor-pointer",children:[p?e.jsx("img",{src:p,alt:"Profile",className:"w-20 h-20 object-cover rounded-full hover:opacity-80 transition-opacity"}):e.jsx(K,{className:"text-black w-20 h-20"}),b&&e.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:e.jsx(F,{color:"border-green"})})]}),e.jsx("div",{onClick:y,className:"bg-red-100 cursor-pointer absolute right-10 top-10 p-2 rounded-full text-red flex items-center gap-2 ",children:N?e.jsx("p",{className:"hidden sm:block",children:e.jsx(F,{color:"border-red"})}):e.jsxs(e.Fragment,{children:[e.jsx("p",{className:"hidden sm:block",children:"Remove Avatar"}),e.jsx(W,{className:" cursor-pointer  text-red-600 p-1 w-6 h-6 rounded-full bg-white",size:16})]})})]})]}),e.jsxs("div",{children:[e.jsx("label",{htmlFor:"username",children:"Username"}),e.jsx(L,{id:"username",type:"text",name:"username",className:"mt-1 break-all opacity-40",placeholder:"Username",register:u,validate:G,errors:c,disabled:!0})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"fullname",children:"Name"}),e.jsx(L,{id:"fullname",type:"text",name:"fullName",className:"mt-1",placeholder:"Name",register:u,validate:Y,errors:c,disabled:!l}),l&&e.jsx(P,{className:"absolute right-3 top-9 text-gray-500",size:16})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"email",children:"Email"}),e.jsx(L,{id:"email",type:"text",name:"email",className:"mt-1",placeholder:"Email",register:u,validate:J,errors:c,disabled:!l}),l&&e.jsx(P,{className:"absolute right-3 top-9 text-gray-500",size:16})]}),e.jsxs("div",{className:"relative",children:[e.jsx("label",{htmlFor:"bio",className:"block text-sm font-medium text-gray-700 mb-1",children:"Bio"}),e.jsx("textarea",{...u("bio"),id:"bio",rows:"4",name:"bio",maxLength:120,className:`w-full px-3 py-2 rounded-3xl focus:outline-none ${l?"":"bg-gray-50"}`,disabled:!l}),l&&e.jsx(P,{className:"absolute right-3 top-9 text-gray-400 hover:text-gray-600 transition-colors",size:16})]}),e.jsxs("div",{className:"flex justify-between mt-8",children:[e.jsx(C,{type:"button",variant:"secondary",className:"py-2 px-8 border-grey-light bg-blue-lighter",onClick:()=>t(!l),children:l?"Cancel":"Edit"}),l&&e.jsx(C,{type:"submit",variant:"secondary",disabledBoolean:m,className:"py-2 px-8 bg-green-light border-green",children:m?e.jsx("span",{className:"w-32 inline-block",children:e.jsx(F,{color:"border-green"})}):e.jsx("span",{children:"Save Changes"})})]})]})},ae=a=>{var g;const[l]=O(),t=(g=a==null?void 0:a.data)==null?void 0:g.socials,n={facebook:(t==null?void 0:t.facebook)||"",twitter:(t==null?void 0:t.twitter)||"",instagram:(t==null?void 0:t.instagram)||"",linkedin:(t==null?void 0:t.linkedin)||"",youtube:(t==null?void 0:t.youtube)||"",tiktok:(t==null?void 0:t.tiktok)||""},{register:m,handleSubmit:i,formState:{errors:b},setError:x}=E({mode:"onChange",defaultValues:n}),N=c=>c?/^(ftp|http|https):\/\/[^ "]+$/.test(c)||"Invalid URL format (e.g., https://example.com)":!0,u=async c=>{const p=Object.entries(c).filter(([,o])=>o).map(([o,j])=>({platform:o,url:j}));if(p.length===0){x("form",{type:"manual",message:"Please provide at least one social link to update."});return}try{await l({socials:p}),f.success("Social links updated successfully")}catch(o){console.error("Error updating social links:",o),x("form",{type:"manual",message:"Failed to update social links. Please try again."})}};return e.jsxs("div",{children:[e.jsx("div",{className:"flex justify-between items-center",children:e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Add Social Links"})}),e.jsxs("form",{onSubmit:i(u),className:"flex flex-col gap-4 w-full",children:[Object.keys(n).map(c=>e.jsxs("div",{children:[e.jsx("label",{htmlFor:c,className:"capitalize",children:c}),e.jsx(L,{id:c,type:"url",name:c,placeholder:"Link goes here...",className:"mt-1",register:m,validate:N,errors:b})]},c)),e.jsx("div",{className:"flex justify-between mt-8",children:e.jsx(C,{type:"submit",variant:"secondary",className:"py-2 px-8 bg-green-light border-green",children:"Save Changes"})})]})]})},te=()=>{var x,N,u,g,c,p;const{user:a}=S(o=>o.auth),[l,{isLoading:t}]=R(),[n,m]=w.useState({line1:((x=a==null?void 0:a.address)==null?void 0:x.line1)||"",line2:((N=a==null?void 0:a.address)==null?void 0:N.line2)||"",city:((u=a==null?void 0:a.address)==null?void 0:u.city)||"",state:((g=a==null?void 0:a.address)==null?void 0:g.state)||"",postalCode:((c=a==null?void 0:a.address)==null?void 0:c.postalCode)||"",country:((p=a==null?void 0:a.address)==null?void 0:p.country)||""}),i=o=>{const{name:j,value:d}=o.target;m(y=>({...y,[j]:d}))},b=async o=>{var j;o.preventDefault();try{await l(n).unwrap(),f.success("Address updated successfully")}catch(d){f.error(((j=d==null?void 0:d.data)==null?void 0:j.message)||"Failed to update address")}};return e.jsxs("div",{className:"md:p-8 p-4 bg-background-alt rounded-xl",children:[e.jsx("h2",{className:"text-3xl font-bold mb-6",children:"Address"}),e.jsxs("form",{onSubmit:b,className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-gray-700 font-semibold",children:["Address Line 1 ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"line1",value:n.line1,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter address line 1",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 font-semibold",children:"Address Line 2"}),e.jsx("input",{type:"text",name:"line2",value:n.line2,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter address line 2 (optional)"})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-gray-700 font-semibold",children:["City ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"city",value:n.city,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter city",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("label",{className:"block text-gray-700 font-semibold",children:"State"}),e.jsx("input",{type:"text",name:"state",value:n.state,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter state (optional)"})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-gray-700 font-semibold",children:["Postal Code ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"postalCode",value:n.postalCode,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter postal code",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("label",{className:"block text-gray-700 font-semibold",children:["Country ",e.jsx("span",{className:"text-red-500",children:"*"})]}),e.jsx("input",{type:"text",name:"country",value:n.country,onChange:i,className:"w-full px-3 py-2 rounded-3xl border border-green-light focus:border-green outline-none",placeholder:"Enter country",required:!0})]})]}),e.jsx(C,{type:"submit",variant:"primary",className:"w-full mt-6 px-2 py-2",disabled:t,children:t?e.jsx(F,{}):"Update Address"})]})]})},le=()=>{var i,b;const[a,{isLoading:l}]=M(),{user:t}=S(x=>x.auth),n=T(),m=()=>{a({user:t._id})};return e.jsxs("div",{className:"flex flex-col gap-6",children:[e.jsxs("div",{className:"md:p-8 p-4 bg-background-alt rounded-xl",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Personal Info"}),e.jsx("div",{className:"mt-4",children:e.jsx(se,{data:t})})]}),e.jsx("div",{className:"md:p-8 p-4 bg-background-alt rounded-xl",children:e.jsx($,{})}),e.jsx("div",{className:"md:p-8 p-4 bg-background-alt rounded-xl",children:e.jsx(ae,{data:t})}),e.jsx("div",{className:"md:p-8 p-4 bg-background-alt rounded-xl",children:e.jsx(te,{})}),e.jsxs("div",{className:"flex md:flex-row flex-col justify-between gap-6",children:[e.jsxs("div",{className:"w-full bg-background-alt md:p-8 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Current Plan"}),e.jsx("div",{className:"flex items-center gap-2 mt-4",children:e.jsx("div",{className:"px-4 py-1.5 bg-primary/10 rounded-full",children:e.jsx("span",{className:"font-semibold text-primary",children:((i=t==null?void 0:t.plan)==null?void 0:i.toUpperCase())||"FREE"})})}),e.jsxs("div",{className:"flex gap-4 items-center mt-6",children:[e.jsx("div",{className:"w-12 h-12 rounded-full overflow-hidden bg-blue-lighter",children:e.jsx("img",{src:(t==null?void 0:t.avatar)||"/icons/DisplayPicture.svg",className:"w-full h-full object-cover",alt:"User Avatar"})}),e.jsxs("div",{children:[e.jsx("p",{className:"font-semibold break-all text-xl",children:t==null?void 0:t.fullName}),e.jsxs("p",{className:"text-xs font-medium",children:["@",t==null?void 0:t.username]})]})]}),((b=t==null?void 0:t.plan)==null?void 0:b.toLowerCase())==="believer"?e.jsx("p",{className:"mt-6 text-gray-700",children:"You are currently on our Believer plan. Enjoy all the advanced features and capabilities!"}):e.jsxs(e.Fragment,{children:[e.jsxs("p",{className:"mt-6 text-gray-700",children:["Upgrade to ",e.jsx("span",{className:"font-semibold",children:'"Believer"'})," plan to unlock additional capabilities and enhanced business support."]}),e.jsx(C,{onClick:()=>n("/upgrade-account"),variant:"primary",className:"px-6 py-2 mt-4",children:"Upgrade Your Plan"})]})]}),e.jsxs("div",{className:"w-full bg-background-alt md:p-8 p-4 rounded-xl",children:[e.jsx("h2",{className:"text-3xl font-bold",children:"Danger Zone"}),e.jsx("div",{className:"my-4",children:e.jsx("div",{className:"mt-4",children:e.jsx(Q,{user:t,isDeleting:l,handleDeleteAccount:m})})})]})]})]})},re=()=>{var h;const[a,l]=w.useState(""),[t,n]=w.useState(""),{data:m}=q(),[i,b]=w.useState(1),x=4,u=(((h=m==null?void 0:m.data)==null?void 0:h.map(s=>{var r,v,k,U;return{id:s==null?void 0:s._id,name:(r=s==null?void 0:s.customerInfo)==null?void 0:r.name,email:(v=s==null?void 0:s.customerInfo)==null?void 0:v.email,quantity:(k=s==null?void 0:s.orderItems[0])==null?void 0:k.quantity,price:s==null?void 0:s.totalAmount,date:new Date(s==null?void 0:s.createdAt).toLocaleDateString("en-US",{day:"numeric",month:"long",year:"numeric"}),orderNumber:s==null?void 0:s.orderNumber,status:(U=s==null?void 0:s.brandOrders[0])==null?void 0:U.status,rating:0,reviews:0,image:"images/placeholder.png"}}))||[]).filter(({name:s,email:r})=>(s==null?void 0:s.toLowerCase().includes(t==null?void 0:t.toLowerCase()))||(r==null?void 0:r.toLowerCase().includes(t==null?void 0:t.toLowerCase()))).sort((s,r)=>{switch(a){case"alphabetically":return s.name.localeCompare(r.name);case"price-low to-high":return parseFloat(s.price)-parseFloat(r.price);case"price-high-low":return parseFloat(r.price)-parseFloat(s.price);case"rating":return r.rating-s.rating;case"reviews":return r.reviews-s.reviews;case"date":return new Date(r.date)-new Date(s.date);default:return 0}}),g=i*x,c=g-x,p=u.slice(c,g),o=Math.ceil(u.length/x),j=s=>n(s.target.value),d=s=>l(s.target.value),y=s=>{b(s)};return e.jsxs("div",{children:[e.jsxs("div",{className:"flex justify-between items-center mb-6",children:[e.jsxs("div",{className:"relative min-h-10 min-w-[400px]",children:[e.jsx("img",{src:Z,alt:"Search Icon",className:"w-4 absolute left-3 top-1/2 transform -translate-y-1/2"}),e.jsx("input",{type:"text",placeholder:"Search for customers",value:t,onChange:j,className:"w-full py-2 pl-10 pr-4 rounded-3xl border border-[#E4FFF0] text-sm focus:outline-none focus:ring-2 focus:ring-white"})]}),e.jsx("div",{className:"flex space-x-4",children:e.jsxs("select",{value:a,onChange:d,className:"p-2 border border-[#E4FFF0] text-sm rounded-3xl focus:outline-none focus:ring-2 focus:ring-white",children:[e.jsx("option",{value:"",children:"Filter"}),e.jsx("option",{value:"alphabetically",children:"Alphabetically"}),e.jsx("option",{value:"price-low to-high",children:"Price: Low to High"}),e.jsx("option",{value:"price-high-low",children:"Price: High to Low"}),e.jsx("option",{value:"rating",children:"By Rating"}),e.jsx("option",{value:"reviews",children:"By Reviews"}),e.jsx("option",{value:"date",children:"By Date"})]})})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 p-4",children:p.length>0?p.map(s=>e.jsx("div",{className:"bg-green-light p-4 rounded-lg space-x-4",children:e.jsxs("div",{className:"flex-grow",children:[e.jsxs("div",{className:"flex py-2",children:[e.jsx("img",{src:s.image,alt:s.name,className:"w-16 h-16 rounded-xl object-cover"}),e.jsxs("div",{className:"p-2 flex justify-between w-full",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"font-semibold pb-1",children:s.name}),e.jsx("p",{className:"text-sm text-green-500",children:s.email}),e.jsxs("p",{className:"text-sm",children:["Order: ",s.orderNumber]}),e.jsxs("p",{className:"text-sm",children:["Quantity: ",s.quantity]}),e.jsxs("p",{className:"text-sm",children:["Status: ",s.status]})]}),e.jsx("span",{className:"font-bold",children:s.date})]})]}),e.jsx("div",{className:"flex items-center pb-3 space-x-2"}),e.jsxs("p",{className:"text-2xl font-bold",children:["Total: ",s.price,"€"]})]})},s.id)):e.jsx("div",{className:" text-center text-gray-500 mt-10",children:"No orders found."})}),p.length>0&&e.jsxs("div",{className:"flex justify-center mt-6 gap-2",children:[e.jsx(C,{onClick:()=>y(i-1),disabled:i===1,className:"px-4 py-2",children:"Previous"}),[...Array(o)].map((s,r)=>e.jsx(C,{onClick:()=>y(r+1),className:`px-4 py-2 ${i===r+1?"bg-gray-400 text-white":"bg-gray-200 text-black"} `,children:r+1},r+1)),e.jsx(C,{onClick:()=>y(i+1),disabled:i===o,className:"px-4 py-2",children:"Next"})]})]})},ne=()=>{var N,u,g,c,p,o,j;const{data:a}=B(),[l,t]=z.useState(1),n=20,m=(l-1)*n,i=m+n,b=((u=(N=a==null?void 0:a.data)==null?void 0:N.recentOrders)==null?void 0:u.length)||0,x=Math.ceil(b/n);return e.jsxs("div",{className:"p-4",children:[e.jsx("h1",{className:"text-2xl font-bold mb-6",children:"Commission Transactions"}),e.jsxs("div",{className:"overflow-x-auto",children:[((g=a==null?void 0:a.data)==null?void 0:g.recentOrders)&&((c=a==null?void 0:a.data)==null?void 0:c.recentOrders.length)>0&&e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"bg-background-alt text-left",children:[e.jsx("th",{className:"py-3 px-4",children:"Date"}),e.jsx("th",{className:"py-3 px-4",children:"Items"}),e.jsx("th",{className:"py-3 px-4",children:"Commission"}),e.jsx("th",{className:"py-3 px-4",children:"Customer Info"})]})}),e.jsx("tbody",{children:(p=a==null?void 0:a.data)==null?void 0:p.recentOrders.slice(m,i).map(d=>{var y,h,s,r;return e.jsxs("tr",{className:"border-b hover:bg-background-alt/50",children:[e.jsx("td",{className:"py-3 px-4 text-gray-500",children:new Date(d.createdAt).toLocaleDateString()}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex flex-col gap-1",children:d.orderItems.map((v,k)=>e.jsxs("div",{className:"text-sm",children:[e.jsx("span",{className:"font-medium",children:v.productName}),e.jsxs("span",{className:"text-gray-500",children:[" ","(x",v.quantity,")"]})]},k))})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex flex-col gap-1",children:d.orderItems.map((v,k)=>e.jsxs("div",{className:`text-md ${v.commission>0?"text-green-600":"text-yellow-500"}`,children:["+",v.commission.toFixed(2),"€"]},k))})}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex flex-col gap-2",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-200 flex items-center justify-center",children:(h=(y=d.customerInfo)==null?void 0:y.name)==null?void 0:h.charAt(0).toUpperCase()}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{className:"font-medium text-sm",children:(s=d.customerInfo)==null?void 0:s.name}),e.jsx("span",{className:"text-xs text-gray-500",children:(r=d.customerInfo)==null?void 0:r.email})]})]})})})]},d.orderNumber)})})]}),!((o=a==null?void 0:a.data)!=null&&o.recentOrders.length)>0&&e.jsx("div",{className:"text-center text-gray-500 mt-10",children:"No commission transactions found."})]}),((j=a==null?void 0:a.data)==null?void 0:j.recentOrders.length)>0&&e.jsxs("div",{className:"mt-4 flex justify-center gap-2",children:[e.jsx("button",{onClick:()=>t(d=>Math.max(d-1,1)),disabled:l===1,className:"px-3 py-1 rounded border disabled:opacity-50",children:e.jsx(X,{})}),e.jsxs("span",{className:"px-3 py-1",children:["Page ",l," of ",x]}),e.jsx("button",{onClick:()=>t(d=>Math.min(d+1,x)),disabled:l===x,className:"px-3 py-1 rounded border disabled:opacity-50",children:e.jsx(ee,{})})]})]})},ie={0:{id:"profile",name:"Profile"},1:{id:"order-history",name:"Order History"},2:{id:"commissions",name:"Commisions"},3:{id:"profile-settings",name:"Profile Settings"}},Le=()=>{const a=_(),[l,t]=w.useState(0);w.useEffect(()=>{var m;((m=a.state)==null?void 0:m.activeTab)!==void 0&&t(a.state.activeTab)},[a.state]);const n=m=>{t(m)};return e.jsx("div",{className:"flex flex-col gap-4",children:e.jsxs("div",{className:"my-4",children:[e.jsx("div",{className:"mb-4 max-w-lg",children:e.jsx(H,{tabsData:Object.values(ie),activeTabIndex:l,handleTabChange:n})}),e.jsxs("div",{children:[l===0&&e.jsx(le,{}),l===1&&e.jsx(re,{}),l===2&&e.jsx(ne,{}),l===3&&e.jsx(V,{})]})]})})};export{Le as default};
