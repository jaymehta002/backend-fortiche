import{w as U,aA as B,r,aB as F,aC as W,aD as _,j as e,_ as n}from"./main-17S3Hvul.js";import"./cn-DUyS5Z8L.js";import{M as q}from"./Modal-DJGYyB_9.js";import{C as p}from"./CircularLoader-CjEEfieY.js";import"./render-DlHbOUqc.js";import"./x-bcItyjpl.js";import"./createLucideIcon-DUHjy5LS.js";const K=()=>{var b,f;const a=U(s=>s.auth.user),[y,{isLoading:m}]=B();r.useState({"When a product purchased":!1,"When someone view my page":!1,"Payment Confirmation":!1,"Receive Special Offers from Brands":!1,"Receive Special Offers from Us":!1,"When new content published by follower":!1}),r.useState("");const[c,x]=r.useState(""),[o,h]=r.useState(""),[j,{isLoading:w}]=F(),[N,{isLoading:P}]=W();r.useState("change");const[v,d]=r.useState(!1),[l,i]=r.useState({currentPassword:"",newPassword:""}),[S]=_(),[u,C]=r.useState({metaTitle:((b=a==null?void 0:a.seo)==null?void 0:b.metaTitle)||"",metaDescription:((f=a==null?void 0:a.seo)==null?void 0:f.metaDescription)||""}),[D,M]=r.useState(a==null?void 0:a.stripeAccountId),A=()=>{const s={currentPassword:"",newPassword:""};return c||(s.currentPassword="Current password is required"),o?o.length<8?s.newPassword="Password must be at least 8 characters long":/(?=.*[a-z])(?=.*[A-Z])(?=.*\d)/.test(o)||(s.newPassword="Password must contain at least one uppercase letter, one lowercase letter, and one number"):s.newPassword="New password is required",c===o&&(s.newPassword="New password must be different from current password"),i(s),!Object.values(s).some(t=>t!=="")},E=async()=>{A()&&d(!0)},k=async()=>{var s;try{await y({oldPassword:c,newPassword:o}),n.success("Password updated successfully"),x(""),h(""),d(!1)}catch(t){n.error(((s=t==null?void 0:t.data)==null?void 0:s.message)||"Failed to update password")}},O=async()=>{try{const t=(await j()).data.data.accountLink;window.open(t,"_blank")}catch{n.error("Error connecting account")}},g=s=>{const{name:t,value:T}=s.target;C(R=>({...R,[t]:T}))},I=async()=>{var s;try{await S(u),n.success("SEO settings updated successfully")}catch(t){n.error(((s=t==null?void 0:t.data)==null?void 0:s.message)||"Failed to update SEO settings")}},L=async()=>{try{await N(),M(null),n.success("Stripe account disconnected successfully")}catch{n.error("Failed to disconnect Stripe account")}};return e.jsxs("div",{className:"grid grid-cols-2 gap-4 p-4",children:[D===null?e.jsxs("div",{className:"bg-yellow-100 border-l-4 border-yellow-500 col-span-2 p-8 rounded-lg shadow-lg relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4",children:e.jsx("span",{className:"bg-red-500 text-white px-3 py-1 text-sm rounded-full shadow-md",children:"Important"})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-6 text-yellow-700",children:"Payment Details"}),e.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Set your default currency for payment and link or un-link your payment account. This is a crucial first step to get started!"}),e.jsx("div",{className:"flex items-center gap-4",children:e.jsx("button",{onClick:O,className:"bg-green-600 text-white font-bold px-5 py-3 rounded-full shadow hover:bg-green-700 transition-all duration-200",children:w?e.jsx(p,{}):"Connect Account"})})]}):e.jsxs("div",{className:"bg-green-100 border-l-4 border-green-500 col-span-2 p-8 rounded-lg shadow-lg relative",children:[e.jsx("div",{className:"absolute -top-4 -left-4",children:e.jsx("span",{className:"bg-green-500 text-white px-3 py-1 text-sm rounded-full shadow-md",children:w?e.jsx(p,{}):"Connected"})}),e.jsx("h2",{className:"text-4xl font-extrabold mb-6 text-green-700",children:"Payment Details"}),e.jsx("p",{className:"text-gray-700 mb-4 text-lg",children:"Your Stripe account is connected. You can receive payments."}),e.jsx("button",{onClick:L,className:"bg-red-600 text-white font-bold px-5 py-3 rounded-full shadow hover:bg-red-700 transition-all duration-200",children:P?e.jsx(p,{}):"Disconnect Account"})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Reset Password"}),e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Enter your current password and your new password below."}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx("input",{type:"password",value:c,onChange:s=>{x(s.target.value),i(t=>({...t,currentPassword:""}))},placeholder:"Current Password",className:`w-full p-3 border rounded-full ${l.currentPassword?"border-red-500":""}`}),l.currentPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-3",children:l.currentPassword})]}),e.jsxs("div",{children:[e.jsx("input",{type:"password",value:o,onChange:s=>{h(s.target.value),i(t=>({...t,newPassword:""}))},placeholder:"New Password",className:`w-full p-3 border rounded-full ${l.newPassword?"border-red-500":""}`}),l.newPassword&&e.jsx("p",{className:"text-red-500 text-sm mt-1 ml-3",children:l.newPassword})]}),e.jsx("button",{onClick:E,disabled:m,className:"w-full bg-green-500 text-white px-4 py-3 rounded-full hover:bg-green-600 transition-colors duration-200 disabled:bg-green-300",children:m?"Updating...":"Update Password"})]})]}),e.jsxs("div",{className:"bg-white p-8 rounded-lg shadow",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"SEO"}),e.jsx("h3",{className:"font-bold text-2xl mb-2",children:"Custom Metadata"}),e.jsx("p",{className:"text-base text-gray-600 mb-4",children:"Changes to metadata may take some time to appear on other platforms."}),e.jsx("label",{className:"text-base mb-2",children:"Meta title"}),e.jsx("input",{type:"text",name:"metaTitle",value:u.metaTitle,onChange:g,placeholder:"Meta title",className:"w-full p-2 border rounded mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Example: @peterdoe"}),e.jsx("label",{className:"text-base mb-2",children:"Meta description"}),e.jsx("input",{type:"text",name:"metaDescription",value:u.metaDescription,onChange:g,placeholder:"Meta description",className:"w-full p-2 border rounded mb-2"}),e.jsx("p",{className:"text-xs text-gray-500 mb-4",children:"Example: Best Ayurveda Practitioner"}),e.jsx("button",{onClick:I,className:"bg-green-500 text-white px-4 py-2 rounded-full hover:bg-green-600 transition-colors duration-200",children:"Save SEO Settings"})]}),e.jsx(q,{isOpen:v,onClose:()=>d(!1),title:"Confirm Password Change",children:e.jsxs("div",{className:"p-6",children:[e.jsx("p",{className:"mb-4",children:"Are you sure you want to change your password?"}),e.jsxs("div",{className:"flex justify-end gap-4",children:[e.jsx("button",{onClick:()=>d(!1),className:"px-4 py-2 rounded-full border border-gray-300 hover:bg-gray-100",children:"Cancel"}),e.jsx("button",{onClick:k,className:"px-4 py-2 rounded-full bg-green-500 text-white hover:bg-green-600",children:"Confirm"})]})]})})]})};export{K as default};
